{"version":3,"sources":["lib/TranscriptEditor/Settings/index.module.css","lib/TranscriptEditor/MediaPlayer/PlayerControls.module.css","lib/TranscriptEditor/TimedTextEditor/index.js","lib/TranscriptEditor/TimedTextEditor/Word.js","lib/TranscriptEditor/TimedTextEditor/SpeakerLabel.js","lib/Util/timecode-converter/secondsToTimecode.js","lib/Util/timecode-converter/timecodeToSeconds.js","lib/Util/timecode-converter/padTimeToTimecode.js","lib/Util/timecode-converter/index.js","lib/TranscriptEditor/TimedTextEditor/WrapperBlock.js","lib/Util/adapters/generate-entities-ranges/index.js","lib/Util/adapters/bbc-kaldi/index.js","lib/Util/adapters/autoEdit2/index.js","lib/Util/adapters/index.js","lib/Util/export-adapters/index.js","lib/Util/export-adapters/txt/index.js","lib/TranscriptEditor/MediaPlayer/VideoPlayer.js","lib/TranscriptEditor/MediaPlayer/Select.js","lib/TranscriptEditor/MediaPlayer/PlayerControls.js","lib/TranscriptEditor/MediaPlayer/ProgressBar.js","lib/TranscriptEditor/MediaPlayer/defaultHotKeys.js","lib/TranscriptEditor/MediaPlayer/index.js","lib/TranscriptEditor/Settings/Toggle/index.js","lib/TranscriptEditor/Settings/TimecodeOffset/index.js","lib/TranscriptEditor/Settings/index.js","lib/TranscriptEditor/KeyboardShortcutHelp/index.js","lib/TranscriptEditor/index.js","select-stt-json-type.js","select-export-format.js","index.js","lib/TranscriptEditor/TimedTextEditor/WrapperBlock.module.css","lib/TranscriptEditor/MediaPlayer/index.module.css","lib/TranscriptEditor/index.module.css","index.module.css","lib/TranscriptEditor/KeyboardShortcutHelp/index.module.css","lib/TranscriptEditor/MediaPlayer/ProgressBar.module.css","lib/TranscriptEditor/Settings/Toggle/index.module.css","lib/TranscriptEditor/TimedTextEditor/index.module.css","lib/TranscriptEditor/MediaPlayer/Select.module.css"],"names":["module","exports","settings","controlsContainer","settingElement","color-darkest-grey","color-light-grey","color-labs-red","playerControls","playerButton","playBackRate","timeBox","currentTime","separator","duration","mutability","Word","generateConfidence","data","confidence","generatePreviousTimes","prevTimes","i","start","concat","dec","Math","floor","this","props","entityKey","contentState","getEntity","getData","react_default","a","createElement","data-start","data-end","end","data-confidence","data-prev-times","data-entity-key","key","className","children","PureComponent","SpeakerLabel","style","speaker","EditLabel","onClick","handleOnClickEdit","role","aria-label","name","secondsToTimecode","seconds","framePerSeconds","fps","undefined","normalisedSeconds","Number","toPrecision","toFixed","normalisePlayerTime","wholeSeconds","frames","_padZero","n","parseInt","timecodeToSecondsHelper","tc","s","split","timecodeToFrames","isOneDigit","str","length","padTimeToTimecode","time","timecode","includes","includesFullStop","replace","timecodeToSeconds","resultPadded","parseFloat","WrapperBlock","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","newSpeakerName","prompt","setState","keyForCurrentCurrentBlock","block","getKey","currentBlockSelection","SelectionState","createEmpty","currentBlockSelectionState","EditorState","acceptSelection","blockProps","editorState","getSelection","newBlockDataWithSpeakerName","newContentState","Modifier","mergeBlockData","setEditorNewContentState","handleTimecodeClick","onWordClick","state","timecodeOffset","prevProps","prevState","console","log","get","startTimecode","speakerElement","TimedTextEditor_SpeakerLabel","timecodeElement","slice","markers","showSpeakers","showTimecodes","text","Draft","nextProps","React","Component","generateEntitiesRanges","words","wordAttributeName","position","map","word","result","offset","random","toString","substring","bbcKaldiToDraft","bbcKaldiJson","results","paragraph","forEach","test","punct","push","groupWordsInParagraphs","retval","draftJsContentBlockParagraph","join","type","entityRanges","autoEdit2ToDraft","autoEdit2Json","autoEditText","autoEditparagraph","autoEditLine","line","tmpWord","startTime","endTime","createEntityMap","blocks","flatEntityRanges","flatten","list","reduce","b","Array","isArray","entityMap","sttJsonAdapter","transcriptData","sttJsonType","error","exportAdapter","blockData","exportFormat","JSON","stringify","ext","x","draftToTxt","TimedTextEditor","onChange","getCurrentContent","isPauseWhileTypingOn","isPlaying","playMedia","clearTimeout","plauseWhileTypingTimeOut","setTimeout","bind","assertThisInitialized","isEditable","inputCount","localSave","mediaUrl","handleDoubleClick","event","element","nativeEvent","target","hasAttribute","parentElement","t","getAttribute","convertToRaw","localStorage","setItem","newLastLocalSavedDate","Date","setEditorContentState","convertFromRaw","createWithContent","decorator","forceRenderDecorator","getDecorator","newState","newEditorState","customKeyBindingFn","e","keyCode","getDefaultKeyBinding","handleKeyCommand","command","splitParagraph","currentSelection","isCollapsed","currentContent","splitBlock","splitState","targetSelection","originalBlock","blockMap","selectionBefore","getStartKey","blockSpeaker","wordStartTime","isEndOfParagraph","getEntityAt","getStartOffset","closestEntityToSelection","findClosestEntityKeyToSelectionPoint","entityData","afterMergeContentState","startSelectionOffsetKey","lengthPlainTextForTheBlock","getLength","remainingCharNumber","j","initialSelectionOffset","renderBlockWithTimecodes","component","editable","getCurrentWord","currentWord","isScrollIntoViewOn","document","querySelector","scrollIntoView","inline","loadData","format","getItem","parse","lastLocalSavedDate","_this2","round","editor","onDoubleClick","scoped","stripPastedStyles","blockRendererFn","keyBindingFn","CompositeDecorator","strategy","contentBlock","callback","findEntityRanges","character","getMutability","VideoPlayer","id","playsInline","src","onTimeUpdate","data-testid","ref","videoRef","Select","options","option","index","value","label","selectPlayerControl","defaultValue","currentValue","handleChange","PlayerControls","setIntervalHelperBackward","interval","setInterval","skipBackward","setIntervalHelperForward","skipForward","clearIntervalHelper","clearInterval","rollback","onMouseDown","onMouseUp","MediaPlayer_Select","setPlayBackRate","promptSetCurrentTime","ProgressBar","progress","bar","buttonClick","min","max","returnHotKeys","self","esc","priority","handler","togglePlayMedia","helperText","ctrl+k","ctrl+1","ctrl+2","ctrl+3","decreasePlaybackRate","ctrl+4","increasePlaybackRate","ctrl+5","rollBack","MediaPlayer","hot_keys","setCurrentTime","newCurrentTime","newCurrentTimeInSeconds","current","readyState","setTimeCodeOffset","newTimeCodeOffSet","tmpDesiredCurrentTime","rollBackValueInSeconds","handleTimeUpdate","hookOnTimeUpdate","handlePlayBackRateChange","getCurrentPlaybackRate","playbackRate","speedValue","handleChangeReplayRollbackValue","handleMuteVolume","volume","paused","pauseMedia","pause","play","handleProgressBarClick","getMediaCurrentTime","getMediaDuration","createRef","hotKeys","hookSeek","hookPlayMedia","hookIsPlaying","player","MediaPlayer_VideoPlayer","playerControlsSection","styles","controlsSection","titleBox","title","MediaPlayer_PlayerControls","onSetCurrentTime","onSetTimecodeOffset","progressBar","MediaPlayer_ProgressBar","topSection","playerSection","hotkeys","Toggle","switch","defaultChecked","handleToggle","slider","TimecodeOffset","resetTimecodeOffset","handleSetTimecodeOffset","setTimecodeOffset","Settings","Settings_Toggle","defaultValuePauseWhileTyping","handlePauseWhileTyping","defaultvalueScrollSync","handleIsScrollIntoViewChange","defaultRollBackValueInSeconds","handleRollBackValueInSeconds","handleShowTimecodes","handleShowSpeakers","Settings_TimecodeOffset","KeyboardShortcutHelp","hotKeysCheatsheet","keys","listStyle","TranscriptEditor","handleWordClick","handlePlayMedia","bool","handleIsPlaying","isChecked","checked","rollBackValue","refs","timedTextEditor","forceUpdate","getEditorContent","handleSettingsToggle","showSettings","handleKeyboardShortcutsHelpToggle","showKeyboardShortcutsHelp","lastLocalSavedTime","isPresentInLocalStorage","loadLocalSavedData","mediaPlayer","TranscriptEditor_MediaPlayer","foo","styleSettings","TranscriptEditor_Settings","KeyboardShortcutHelpElement","KeyboardShortcutHelpSettings","TranscriptEditor_KeyboardShortcutHelp","container","aside","settingsButton","main","TranscriptEditor_TimedTextEditor","SttTypeSelect","disabled","ExportFormatSelect","App","handleIsTextEditable","isTextEditable","handleSttTypeChange","defineProperty","handleExportFormatChange","exportTranscript","_this$refs$transcript","transcriptEditor","download","content","filename","contentType","blob","Blob","href","window","URL","createObjectURL","click","clearLocalStorage","clear","info","sttType","kaldiTedTalkTranscript","files","file","canPlayType","fileURL","fr","FileReader","onload","readAsText","rel","loadDemo","select_stt_json_type","handleChangeLoadTranscriptJson","handleChangeLoadMedia","handleChangeLoadMediaUrl","select_export_format","lib_TranscriptEditor","render","src_App","getElementById","color-mid-grey","color-dark-grey","helpText","hideInMobile","color-subt-green","switchContainer","DraftEditor-root"],"mappings":"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","file":"static/js/main.68c7ea12.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"Settings_settings__3UPB5\",\"controlsContainer\":\"Settings_controlsContainer__2E90Z\",\"settingElement\":\"Settings_settingElement__2ZeKY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-darkest-grey\":\"#282828\",\"color-light-grey\":\"#767676\",\"color-labs-red\":\"#a0372d\",\"playerControls\":\"PlayerControls_playerControls__3emd7\",\"playerButton\":\"PlayerControls_playerButton___xv7e\",\"playBackRate\":\"PlayerControls_playBackRate__2IcvZ\",\"timeBox\":\"PlayerControls_timeBox__2T0JQ\",\"currentTime\":\"PlayerControls_currentTime__QZjCv\",\"separator\":\"PlayerControls_separator__f03Pz\",\"duration\":\"PlayerControls_duration__l__Bv\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  Editor,\n  EditorState,\n  CompositeDecorator,\n  convertFromRaw,\n  convertToRaw,\n  getDefaultKeyBinding,\n  Modifier\n} from 'draft-js';\n\nimport Word from './Word';\nimport WrapperBlock from './WrapperBlock';\n\nimport sttJsonAdapter from '../../Util/adapters/index.js';\nimport exportAdapter from '../../Util/export-adapters/index.js';\nimport style from './index.module.css';\nimport { throws } from 'assert';\n\nclass TimedTextEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      editorState: EditorState.createEmpty(),\n      transcriptData: this.props.transcriptData,\n      isEditable: this.props.isEditable,\n      sttJsonType: this.props.sttJsonType,\n      timecodeOffset: this.props.timecodeOffset,\n      showSpeakers: this.props.showSpeakers,\n      showTimecodes: this.props.showTimecodes,\n      inputCount: 0,\n      currentWord: {}\n    };\n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.transcriptData !== null) {\n      console.log('TimedTextEditor getDerivedStateFromProps', nextProps);\n      \n      return {\n        transcriptData: nextProps.transcriptData,\n        isEditable: nextProps.isEditable,\n        timecodeOffset: nextProps.timecodeOffset,\n        showSpeakers: nextProps.showSpeakers,\n        showTimecodes: nextProps.showTimecodes\n      };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.transcriptData !== this.state.transcriptData) {\n      this.loadData();\n    }\n    if (prevState.timecodeOffset !== this.state.timecodeOffset\n      || prevState.showSpeakers !== this.state.showSpeakers\n      || prevState.showTimecodes !== this.state.showTimecodes) {\n      // forcing a re-render is an expensive operation and \n      // there might be a way of optimising this at a later refactor (?)\n      // the issue is that WrapperBlock is not update on TimedTextEditor \n      // state change otherwise.\n      // for now compromising on this, as setting timecode offset, and \n      // display preferences for speakers and timecodes are not expected to \n      // be very frequent operations but rather one time setup in most cases.\n      this.forceRenderDecorator();\n    }\n  }\n\n  onChange = (editorState) => {\n    // https://draftjs.org/docs/api-reference-editor-state#lastchangetype\n    // https://draftjs.org/docs/api-reference-editor-change-type\n    // doing editorStateChangeType === 'insert-characters'  is triggered even\n    // outside of draftJS eg when clicking play button so using this instead\n    // see issue https://github.com/facebook/draft-js/issues/1060\n    if (this.state.editorState.getCurrentContent() !== editorState.getCurrentContent()) {\n      if (this.props.isPauseWhileTypingOn) {\n        if (this.props.isPlaying()) {\n          this.props.playMedia(false);\n          // Pause video for X seconds\n          const pauseWhileTypingIntervalInMilliseconds = 3000;\n          // resets timeout\n          clearTimeout(this.plauseWhileTypingTimeOut);\n          this.plauseWhileTypingTimeOut = setTimeout(function() {\n            // after timeout starts playing again\n            this.props.playMedia(true);\n          }.bind(this), pauseWhileTypingIntervalInMilliseconds);\n        }\n      }\n    }\n\n    if (this.state.isEditable) {\n      this.setState((prevState, props) => ({\n        editorState,\n        inputCount: prevState.inputCount + 1,\n      }), () => {\n        // Saving every 5 keystrokes\n        if (this.state.inputCount > 5) {\n          this.setState({\n            inputCount: 0,\n          });\n\n          this.localSave(this.props.mediaUrl);\n        }\n      });\n    }\n  }\n\n  loadData() {\n    if (this.props.transcriptData !== null) {\n      const blocks = sttJsonAdapter(this.props.transcriptData, this.props.sttJsonType);\n      this.setEditorContentState(blocks);\n    }\n  }\n\n  getEditorContent(exportFormat) {\n    const format = exportFormat || 'draftjs';\n    \n    return exportAdapter(convertToRaw(this.state.editorState.getCurrentContent()), format);\n  }\n\n  // click on words - for navigation\n  // eslint-disable-next-line class-methods-use-this\n  handleDoubleClick = (event) => {\n    // nativeEvent --> React giving you the DOM event\n    let element = event.nativeEvent.target;\n    // find the parent in Word that contains span with time-code start attribute\n    while (!element.hasAttribute('data-start') && element.parentElement) {\n      element = element.parentElement;\n    }\n\n    if (element.hasAttribute('data-start')) {\n      const t = parseFloat(element.getAttribute('data-start'));\n      this.props.onWordClick(t);\n    }\n  }\n\n  localSave = () => {\n    const mediaUrl = this.props.mediaUrl;\n    const data = convertToRaw(this.state.editorState.getCurrentContent());\n    localStorage.setItem(`draftJs-${ mediaUrl }`, JSON.stringify(data));\n    const newLastLocalSavedDate = new Date().toString();\n    localStorage.setItem(`timestamp-${ mediaUrl }`, newLastLocalSavedDate);\n\n    return newLastLocalSavedDate;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  isPresentInLocalStorage(mediaUrl) {\n    const data = localStorage.getItem(`draftJs-${ mediaUrl }`);\n    if (data !== null) {\n      return true;\n    }\n\n    return false;\n  }\n\n  loadLocalSavedData(mediaUrl) {\n    const data = JSON.parse(localStorage.getItem(`draftJs-${ mediaUrl }`));\n    if (data !== null) {\n      const lastLocalSavedDate = localStorage.getItem(`timestamp-${ mediaUrl }`);\n      this.setEditorContentState(data);\n\n      return lastLocalSavedDate;\n    }\n\n    return '';\n  }\n\n  /**\n  * @param {object} data.entityMap - draftJs entity maps - used by convertFromRaw\n  * @param {object} data.blocks - draftJs blocks - used by convertFromRaw\n  * set DraftJS Editor content state from blocks\n  * contains blocks and entityMap\n  */\n  setEditorContentState = (data) => {\n    const contentState = convertFromRaw(data);\n    // eslint-disable-next-line no-use-before-define\n    const editorState = EditorState.createWithContent(contentState, decorator);\n    this.setState({ editorState });\n  }\n\n  // Helper function to re-render this component\n  // used to re-render WrapperBlock on timecode offset change\n  // or when show / hide preferences for speaker labels and timecodes change\n  forceRenderDecorator= () => {\n    // const { editorState, updateEditorState } = this.props;\n    const contentState =   this.state.editorState.getCurrentContent();\n    const decorator =   this.state.editorState.getDecorator();\n  \n    const newState = EditorState.createWithContent(\n      contentState,\n      decorator\n    );\n  \n    // this.setEditorNewContentState(newState);\n    const newEditorState = EditorState.push(newState, contentState);\n    this.setState({ editorState: newEditorState });\n  }\n\n  /**\n  * Update Editor content state\n  */\n  setEditorNewContentState = (newContentState) => {\n    const newEditorState = EditorState.push(this.state.editorState, newContentState);\n    this.setState({ editorState: newEditorState });\n  }\n\n  /**\n   * Listen for draftJs custom key bindings\n   */\n  customKeyBindingFn = ( e) => {\n    const enterKey = 13;\n    if (e.keyCode === enterKey ) {\n      return 'split-paragraph';\n    }\n\n    return getDefaultKeyBinding(e);\n  }\n\n  /**\n   * Handle draftJs custom key commands\n   */\n  handleKeyCommand = (command) => {\n    if (command === 'split-paragraph') {\n      this.splitParagraph();\n    }\n    \n    return 'not-handled';\n  }\n\n  /**\n   * Helper function to handle splitting paragraphs with return key\n   * on enter key, perform split paragraph at selection point.\n   * Add timecode of next word after split to paragraph\n   * as well as speaker name to new paragraph\n   */\n  splitParagraph = () => {\n    // https://github.com/facebook/draft-js/issues/723#issuecomment-367918580\n    // https://draftjs.org/docs/api-reference-selection-state#start-end-vs-anchor-focus\n    const currentSelection = this.state.editorState.getSelection();\n    // only perform if selection is not selecting a range of words\n    // in that case, we'd expect delete + enter to achieve same result.\n    if (currentSelection.isCollapsed()) {\n      const currentContent = this.state.editorState.getCurrentContent();\n      // https://draftjs.org/docs/api-reference-modifier#splitblock\n      const newContentState = Modifier.splitBlock(currentContent, currentSelection);\n      // https://draftjs.org/docs/api-reference-editor-state#push\n      const splitState = EditorState.push(this.state.editorState, newContentState, 'split-block');\n      const targetSelection = splitState.getSelection();\n\n      const originalBlock = currentContent.blockMap.get(newContentState.selectionBefore.getStartKey());\n      const originalBlockData = originalBlock.getData();\n      const blockSpeaker = originalBlockData.get('speaker');\n\n      let wordStartTime = 'NA';\n      // eslint-disable-next-line prefer-const\n      let isEndOfParagraph = false;\n      // identify the entity (word) at the selection/cursor point on split.\n      // eslint-disable-next-line prefer-const\n      let entityKey = originalBlock.getEntityAt(currentSelection.getStartOffset());\n      // if there is no word entity associated with a char then there is no entity key \n      // at that selection point\n      if (entityKey === null) {\n        const closestEntityToSelection = this.findClosestEntityKeyToSelectionPoint(currentSelection,originalBlock);\n        entityKey = closestEntityToSelection.entityKey;\n        isEndOfParagraph = closestEntityToSelection.isEndOfParagraph;\n        // handle edge case when it doesn't find a closest entity (word) \n        // eg pres enter on an empty line\n        if (entityKey === null) {\n          return 'not-handled';\n        }\n      }\n      // if there is an entityKey at or close to the selection point\n      // can get the word startTime. for the new paragraph.\n      const entityInstance = currentContent.getEntity(entityKey);\n      const entityData = entityInstance.getData();\n      if (isEndOfParagraph) {\n        // if it's end of paragraph use end time of word for new paragraph\n        wordStartTime = entityData.end;\n      }\n      else {\n        wordStartTime = entityData.start;\n      }\n      // split paragraph\n      // https://draftjs.org/docs/api-reference-modifier#mergeblockdata\n      const afterMergeContentState = Modifier.mergeBlockData(\n        splitState.getCurrentContent(),\n        targetSelection,\n        {\n          'start': wordStartTime,\n          'speaker': blockSpeaker\n        }\n      );\n      this.setEditorNewContentState(afterMergeContentState);\n  \n      return 'handled';\n    }\n  \n    return 'not-handled';\n  }\n  \n  /**\n   * Helper function for splitParagraph \n   * to find the closest entity (word) to a selection point \n   * that does not fall on an entity to begin with\n   * Looks before if it's last char in a paragraph block.\n   * After for everything else.\n   */\n  findClosestEntityKeyToSelectionPoint = (currentSelection,originalBlock) => {\n    // set defaults\n    let entityKey = null;\n    let isEndOfParagraph = false;\n  \n    // selection offset from beginning of the paragraph block\n    const startSelectionOffsetKey = currentSelection.getStartOffset();\n    // length of the plain text for the ContentBlock\n    const lengthPlainTextForTheBlock = originalBlock.getLength();\n    // number of char from selection point to end of paragraph\n    const remainingCharNumber = lengthPlainTextForTheBlock - startSelectionOffsetKey;\n    // if it's the last char in the paragraph - get previous entity\n    if (remainingCharNumber === 0 ) {\n      isEndOfParagraph = true;\n      for (let j = lengthPlainTextForTheBlock; j >0 ; j--) {\n        entityKey = originalBlock.getEntityAt(j);\n        if (entityKey!== null) {\n          // if it finds it then return \n          return { entityKey, isEndOfParagraph };\n        }\n      }\n    }\n    // if it's first char or another within the block - get next entity \n    else {\n      console.log('Main part of paragraph');\n      let initialSelectionOffset = currentSelection.getStartOffset();\n      for (let i = 0; i < remainingCharNumber ; i++) {\n        initialSelectionOffset +=i;\n        entityKey = originalBlock.getEntityAt(initialSelectionOffset);\n        // if it finds it then return \n        if (entityKey !== null) {\n          return { entityKey, isEndOfParagraph };\n        }\n      }\n    }\n\n    // cover edge cases where it doesn't find it\n    return { entityKey, isEndOfParagraph }; \n  }\n\n  renderBlockWithTimecodes = () => {\n    console.log('this.props.timecodeOffset',this.props.timecodeOffset);\n    \n    return {\n      component: WrapperBlock,\n      editable: true,\n      props: {\n        showSpeakers: this.state.showSpeakers,\n        showTimecodes: this.state.showTimecodes,\n        timecodeOffset: this.state.timecodeOffset,\n        editorState: this.state.editorState,\n        setEditorNewContentState: this.setEditorNewContentState,\n        onWordClick: this.props.onWordClick\n      }\n    };\n  }\n\n  getCurrentWord = () => {\n    const currentWord = {\n      start: 'NA',\n      end: 'NA'\n    };\n\n    if (this.state.transcriptData) {\n      const contentState = this.state.editorState.getCurrentContent();\n      // TODO: using convertToRaw here might be slowing down performance(?) \n      const contentStateConvertEdToRaw = convertToRaw(contentState);\n      const entityMap = contentStateConvertEdToRaw.entityMap;\n\n      for (var entityKey in entityMap) {\n        const entity = entityMap[entityKey];\n        const word = entity.data;\n\n        if (word.start <= this.props.currentTime && word.end >= this.props.currentTime) {\n          currentWord.start = word.start;\n          currentWord.end = word.end;\n        }\n      }\n    }\n    \n    if (currentWord.start !== 'NA') {\n      if (this.props.isScrollIntoViewOn) {\n        const currentWordElement = document.querySelector(`span.Word[data-start=\"${ currentWord.start }\"]`);\n        currentWordElement.scrollIntoView({ block: 'center', inline: 'center' });\n      }\n    }\n\n    return currentWord;\n  }\n\n  render() {\n    const currentWord = this.getCurrentWord();\n    const highlightColour = '#69e3c2';\n    const unplayedColor = '#767676';\n    const correctionBorder = '1px dotted blue';\n\n    // Time to the nearest half second\n    const time = Math.round(this.props.currentTime * 4.0) / 4.0;\n\n    const editor = (\n      <section\n        className={ style.editor }\n        onDoubleClick={ event => this.handleDoubleClick(event) }>\n\n        <style scoped>\n          {`span.Word[data-start=\"${ currentWord.start }\"] { background-color: ${ highlightColour }; text-shadow: 0 0 0.01px black }`}\n          {`span.Word[data-start=\"${ currentWord.start }\"]+span { background-color: ${ highlightColour } }`}\n          {`span.Word[data-prev-times~=\"${ Math.floor(time) }\"] { color: ${ unplayedColor } }`}\n          {`span.Word[data-prev-times~=\"${ time }\"] { color: ${ unplayedColor } }`}\n          {`span.Word[data-confidence=\"low\"] { border-bottom: ${ correctionBorder } }`}\n        </style>\n\n        <Editor\n          editorState={ this.state.editorState }\n          onChange={ this.onChange }\n          stripPastedStyles\n          blockRendererFn={ this.renderBlockWithTimecodes }\n          handleKeyCommand={ command => this.handleKeyCommand(command) }\n          keyBindingFn={ e => this.customKeyBindingFn(e) }\n        />\n      </section>\n    );\n\n    return (\n      <section>\n        { this.props.transcriptData !== null ? editor : null }\n      </section>\n    );\n  }\n}\n\n// DraftJs decorator to recognize which entity is which\n// and know what to apply to what component\nconst getEntityStrategy = mutability => (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges((character) => {\n    const entityKey = character.getEntity();\n    if (entityKey === null) {\n      return false;\n    }\n\n    return contentState.getEntity(entityKey).getMutability() === mutability;\n  }, callback);\n};\n\n// decorator definition - Draftjs\n// defines what to use to render the entity\nconst decorator = new CompositeDecorator([\n  {\n    strategy: getEntityStrategy('MUTABLE'),\n    component: Word,\n  },\n]);\n\nTimedTextEditor.propTypes = {\n  transcriptData: PropTypes.object,\n  mediaUrl: PropTypes.string,\n  isEditable: PropTypes.bool,\n  onWordClick: PropTypes.func,\n  sttJsonType: PropTypes.string,\n  isPlaying: PropTypes.func,\n  playMedia: PropTypes.func,\n  currentTime: PropTypes.number,\n  isScrollIntoViewOn: PropTypes.bool,\n  isPauseWhileTypingOn: PropTypes.bool,\n  timecodeOffset: PropTypes.number\n};\n\nexport default TimedTextEditor;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Word extends PureComponent {\n  generateConfidence = (data) => {\n    // handling edge case where confidence score not present\n    if (data.confidence) {\n      return  data.confidence > 0.6 ? 'high' : 'low';\n    }\n    // if confidence score not present then mark all as high\n    return 'high';\n  }\n\n  generatePreviousTimes = (data) => {\n    let prevTimes = '';\n\n    for (let i = 0; i < data.start; i++) {\n      prevTimes += `${ i } `;\n    }\n\n    if (data.start % 1 > 0) {\n      // Find the closest quarter-second to the current time, for more dynamic results\n      const dec = Math.floor((data.start % 1) * 4.0) / 4.0;\n      prevTimes += ` ${ Math.floor(data.start) + dec }`;\n    }\n\n    return prevTimes;\n  }\n\n  render() {\n    const data = this.props.entityKey\n      ? this.props.contentState.getEntity(this.props.entityKey).getData()\n      : {};\n\n    return (\n      <span\n        data-start={ data.start }\n        data-end={ data.end }\n        data-confidence = { this.generateConfidence(data) }\n        data-prev-times = { this.generatePreviousTimes(data) }\n        data-entity-key={ data.key }\n        className=\"Word\">\n        {this.props.children}\n      </span>\n    );\n  }\n}\n\nWord.propTypes = {\n  contentState: PropTypes.object,\n  entityKey: PropTypes.string,\n  children: PropTypes.array\n};\n\nexport default Word;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport style from './WrapperBlock.module.css';\n\nclass SpeakerLabel extends PureComponent {\n  render() {\n    return (\n      <span className={ style.speaker }>\n        <span\n          className={ style.EditLabel }\n          onClick={ this.props.handleOnClickEdit }\n          role='img'\n          aria-label='Pencil'> ✏️\n        </span>\n        {this.props.name}\n      </span>\n    );\n  }\n}\n\nSpeakerLabel.propTypes = {\n  name: PropTypes.string,\n  handleOnClickEdit: PropTypes.func\n};\n\nexport default SpeakerLabel;\n","/**\n* Raised in this comment https://github.com/bbc/react-transcript-editor/pull/9\n* abstracted from https://github.com/bbc/newslabs-cdn/blob/master/js/20-bbcnpf.utils.js\n* In broadcast VIDEO, timecode is NOT hh:mm:ss:ms, it's hh:mm:ss:ff where ff is frames,\n* dependent on the framerate of the media concerned.\n* `hh:mm:ss:ff`\n*/\n\n/**\n * Helper function\n * Rounds to the 14milliseconds boundaries\n * Time in video can only \"exist in\" 14milliseconds boundaries.\n * This makes it possible for the HTML5 player to be frame accurate.\n * @param {*} seconds\n * @param {*} fps\n */\nconst normalisePlayerTime = function (seconds, fps) {\n  return Number((1.0 / fps * Math.floor(Number((fps * seconds).toPrecision(12)))).toFixed(2));\n};\n\n/*\n* @param {*} seconds\n* @param {*} fps\n*/\nconst secondsToTimecode = function (seconds, framePerSeconds) {\n  // written for PAL non-drop timecode\n  let fps = 25;\n  if (framePerSeconds !== undefined) {\n    fps = framePerSeconds;\n  }\n\n  const normalisedSeconds = normalisePlayerTime(seconds, fps);\n\n  const wholeSeconds = Math.floor(normalisedSeconds);\n  const frames = ((normalisedSeconds - wholeSeconds) * fps).toFixed(2);\n\n  // prepends zero - example pads 3 to 03\n  function _padZero(n) {\n    if (n < 10) return `0${ parseInt(n) }`;\n\n    return parseInt(n);\n  }\n\n  return `${ _padZero((wholeSeconds / 60 / 60) % 60)\n  }:${\n    _padZero((wholeSeconds / 60) % 60)\n  }:${\n    _padZero(wholeSeconds % 60)\n  }:${\n    _padZero(frames) }`;\n};\n\nexport default secondsToTimecode;\n","/**\n * Helperf unction\n * @param {*} tc\n * @param {*} fps\n */\nconst timecodeToFrames = function (tc, fps) {\n  // TODO make 29.97 fps drop-frame aware - works for 25 only.\n\n  const s = tc.split(':');\n  let frames = parseInt(s[3]);\n  frames += parseInt(s[2]) * fps;\n  frames += parseInt(s[1]) * (fps * 60);\n  frames += parseInt(s[0]) * (fps * 60 * 60);\n\n  return frames;\n};\n\n/**\n * Convert broadcast timecodes to seconds\n * @param {*} tc - `hh:mm:ss:ff`\n * @param {*} framePerSeconds - defaults to 25 if not provided\n */\nconst timecodeToSecondsHelper = function (tc, framePerSeconds) {\n  let fps = 25;\n  if (framePerSeconds !== undefined) {\n    fps = framePerSeconds;\n  }\n  const frames = timecodeToFrames(tc, fps);\n\n  return Number(Number(frames / fps).toFixed(2));\n};\n\nexport default timecodeToSecondsHelper;\n","const countColon = timecode => timecode.split(':').length;\n\nconst includesFullStop = timecode => timecode.includes('.');\n\nconst isOneDigit = str => str.length === 1;\n\nconst padTimeToTimecode = (time) => {\n  if (typeof time === 'string') {\n    switch (countColon(time)) {\n    case 4:\n      // is already in timecode format\n      // hh:mm:ss:ff\n      return time;\n    case 2:\n      // m:ss\n      if (isOneDigit(time.split(':')[0])) {\n        return `00:0${ time }:00`;\n      }\n\n      return `00:${ time }:00`;\n    case 3:\n      // hh:mm:ss\n      return `${ time }:00`;\n    default:\n      // mm.ss\n      if (includesFullStop(time)) {\n        // m.ss\n        if (isOneDigit(time.split('.')[0])) {\n          return `00:0${ time.split('.')[0] }:${ time.split('.')[1] }:00`;\n        }\n\n        return `00:${ time.replace('.', ':') }:00`;\n      }\n\n      // if just int, then it's seconds\n      // s\n      if (isOneDigit(time)) {\n        return `00:00:0${ time }:00`;\n      }\n      \n      return `00:00:${ time }:00`;\n    }\n    // edge case if it's number return a number coz cannot refactor\n    // TODO: might need to refactor and move this elsewhere\n  } else {\n    return time;\n  }\n};\n\nexport default padTimeToTimecode;\n","/**\n * Wrapping around \"time stamps\" and timecode conversion modules\n * To provide more support for variety of formats.\n */\nimport secondsToTimecode from './secondsToTimecode';\nimport timecodeToSecondsHelper from './timecodeToSeconds';\nimport padTimeToTimecode from './padTimeToTimecode';\n\n/**\n * @param {*} time\n * Can take as input timecodes in the following formats\n * - hh:mm:ss:ff\n * - mm:ss\n * - m:ss\n * - ss - seconds --> if it's already in seconds then it just returns seconds\n * - hh:mm:ff\n * @todo could be refactored with some helper functions for clarity\n */\nconst timecodeToSeconds = (time) => {\n  if (typeof time === 'string') {\n    const resultPadded = padTimeToTimecode(time);\n    const resultConverted = timecodeToSecondsHelper(resultPadded);\n\n    return resultConverted;\n  }\n\n  // assuming it receive timecode as seconds as string '600'\n  return parseFloat(time);\n};\n\nconst shortTimecode = (time) => {\n  const timecode = secondsToTimecode(time);\n\n  return timecode.slice(0, -3);\n};\n\nexport { secondsToTimecode, timecodeToSeconds, shortTimecode };\n","import React from 'react';\nimport { EditorBlock, Modifier, EditorState, SelectionState } from 'draft-js';\n\nimport SpeakerLabel from './SpeakerLabel';\nimport { shortTimecode } from '../../Util/timecode-converter/';\n\nimport style from './WrapperBlock.module.css';\n\nclass WrapperBlock extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      speaker: '',\n      start: 0,\n      timecodeOffset: this.props.blockProps.timecodeOffset\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    console.log('getDerivedStateFromProps',nextProps.blockProps );\n    if (nextProps.blockProps.timecodeOffset !== null) {\n      return {\n        timecodeOffset: nextProps.blockProps.timecodeOffset\n      };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('componentDidUpdate ',prevProps, this.state.timecodeOffset);\n    if (prevProps.blockProps.timecodeOffset !== prevState.timecodeOffset) {\n      // this.setState({ timecodeOffset: this.prevProps.blockProps.timecodeOffset });\n      return true; \n    }\n \n  }\n\n  componentDidMount() {\n    const { block } = this.props;\n    const speaker = block.getData().get('speaker');\n\n    const start = block.getData().get('start');\n    \n    this.setState({\n      speaker: speaker,\n      start: start \n    });\n  }\n\n  handleOnClickEdit = () => {\n    const newSpeakerName = prompt('New Speaker Name?');\n    if (newSpeakerName !== '' && newSpeakerName !== null) {\n      this.setState({ speaker: newSpeakerName });\n\n      // From docs: https://draftjs.org/docs/api-reference-selection-state#keys-and-offsets\n      // selection points are tracked as key/offset pairs,\n      // where the key value is the key of the ContentBlock where the point is positioned\n      // and the offset value is the character offset within the block.\n\n      // Get key of the currentBlock\n      const keyForCurrentCurrentBlock = this.props.block.getKey();\n      // create empty selection for current block\n      // https://draftjs.org/docs/api-reference-selection-state#createempty\n      const currentBlockSelection = SelectionState.createEmpty(keyForCurrentCurrentBlock);\n      // move selection to current block\n      const EditorStateWithSelectedCurrentBlock = EditorState.acceptSelection(this.props.blockProps.editorState, currentBlockSelection);\n\n      const currentBlockSelectionState = EditorStateWithSelectedCurrentBlock.getSelection();\n      // set new speaker data for block\n      const newBlockDataWithSpeakerName = { speaker: newSpeakerName };\n      // merge data\n      // https://draftjs.org/docs/api-reference-modifier#mergeblockdata\n      const newContentState = Modifier.mergeBlockData(\n        this.props.contentState,\n        currentBlockSelectionState,\n        newBlockDataWithSpeakerName\n      );\n      // cb for saving editorState in TimedTextEditor\n      this.props.blockProps.setEditorNewContentState(newContentState);\n    }\n  }\n\n  handleTimecodeClick = () => {\n    this.props.blockProps.onWordClick(this.state.start);\n  }\n\n  render() {\n    let startTimecode = this.state.start; \n    if ( this.props.blockProps.timecodeOffset) {\n      // console.log(' this.props.blockProps.timecodeOffset: ', this.props.blockProps.timecodeOffset);\n      startTimecode +=  this.props.blockProps.timecodeOffset;\n    }\n    // console.log('startTimecode: ',startTimecode);\n    const speakerElement = <SpeakerLabel\n      name={ this.state.speaker }\n      handleOnClickEdit={ this.handleOnClickEdit }\n    />;\n\n    const timecodeElement =  <span className={ style.time } onClick={ this.handleTimecodeClick }>{shortTimecode(startTimecode)}</span>;\n\n    return (\n      <div className={ style.WrapperBlock }>\n        <div className={ style.markers }>\n          {this.props.blockProps.showSpeakers? speakerElement: ''}\n         \n          {this.props.blockProps.showTimecodes? timecodeElement: ''}\n        </div>\n        <div className={ style.text }>\n          <EditorBlock { ...this.props } />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default WrapperBlock;\n","/**\n * Helper function to generate draft.js entities,\n * see unit test for example data structure\n * it adds offset and length to recognise word in draftjs\n */\n\n/**\n*  @param {json} words  - List of words\n*  @param {string} wordAttributeName - eg 'punct' or 'text' or etc.\n* attribute for the word object containing the text. eg word ={ punct:'helo', ... }\n*  or eg word ={ text:'helo', ... }\n*/\nconst generateEntitiesRanges = (words, wordAttributeName) => {\n  let position = 0;\n\n  return words.map((word) => {\n    const result = {\n      start: word.start,\n      end: word.end,\n      confidence: word.confidence,\n      text: word[wordAttributeName],\n      offset: position,\n      length: word[wordAttributeName].length,\n      key: Math.random()\n        .toString(36)\n        .substring(6),\n    };\n    // increase position counter - to determine word offset in paragraph\n    position = position + word[wordAttributeName].length + 1;\n\n    return result;\n  });\n};\n\nexport default generateEntitiesRanges;\n","/**\n * Convert BBC Kaldi json\n ```\n {\n    \"action\": \"audio-transcribe\",\n    \"retval\": {\n      \"status\": true,\n      \"wonid\": \"octo:2692ea33-d595-41d8-bfd5-aa7f2d2f89ee\",\n      \"punct\": \"There is a day. About ten years ago when  ...\",\n      \"words\": [\n        {\n          \"start\": 13.02,\n          \"confidence\": 0.68,\n          \"end\": 13.17,\n          \"word\": \"there\",\n          \"punct\": \"There\",\n          \"index\": 0\n        },\n        {\n          \"start\": 13.17,\n          \"confidence\": 0.61,\n          \"end\": 13.38,\n          \"word\": \"is\",\n          \"punct\": \"is\",\n          \"index\": 1\n        },\n        ...\n```\n *\n * into\n *\n ```\n const blocks = [\n  {\n    \"text\": \"There is a day.\",\n    \"type\": \"paragraph\",\n    \"data\": {\n      \"speaker\": \"TBC 0\",\n      \"words\": [\n        {\n          \"start\": 13.02,\n          \"confidence\": 0.68,\n          \"end\": 13.17,\n          \"word\": \"there\",\n          \"punct\": \"There\",\n          \"index\": 0\n        },\n        {\n          \"start\": 13.17,\n          \"confidence\": 0.61,\n          \"end\": 13.38,\n          \"word\": \"is\",\n          \"punct\": \"is\",\n          \"index\": 1\n        },\n        {\n          \"start\": 13.38,\n          \"confidence\": 0.99,\n          \"end\": 13.44,\n          \"word\": \"a\",\n          \"punct\": \"a\",\n          \"index\": 2\n        },\n        {\n          \"start\": 13.44,\n          \"confidence\": 1,\n          \"end\": 13.86,\n          \"word\": \"day\",\n          \"punct\": \"day.\",\n          \"index\": 3\n        }\n      ],\n      \"start\": 13.02\n    },\n    \"entityRanges\": [\n      {\n        \"start\": 13.02,\n        \"end\": 13.17,\n        \"confidence\": 0.68,\n        \"text\": \"There\",\n        \"offset\": 0,\n        \"length\": 5,\n        \"key\": \"li6c6ld\"\n      },\n      {\n        \"start\": 13.17,\n        \"end\": 13.38,\n        \"confidence\": 0.61,\n        \"text\": \"is\",\n        \"offset\": 6,\n        \"length\": 2,\n        \"key\": \"pcgzkp6\"\n      },\n      {\n        \"start\": 13.38,\n        \"end\": 13.44,\n        \"confidence\": 0.99,\n        \"text\": \"a\",\n        \"offset\": 9,\n        \"length\": 1,\n        \"key\": \"ngomd9\"\n      },\n      {\n        \"start\": 13.44,\n        \"end\": 13.86,\n        \"confidence\": 1,\n        \"text\": \"day.\",\n        \"offset\": 11,\n        \"length\": 4,\n        \"key\": \"sgmfl4f\"\n      }\n    ]\n  },\n  ...\n```\n *\n */\n\nimport generateEntitiesRanges from '../generate-entities-ranges/index.js';\n\n/**\n * groups words list from kaldi transcript based on punctuation.\n * @todo To be more accurate, should introduce an honorifics library to do the splitting of the words.\n * @param {array} words - array of words opbjects from kaldi transcript\n */\n\nconst groupWordsInParagraphs = (words) => {\n  const results = [];\n  let paragraph = { words: [], text: [] };\n\n  words.forEach((word) => {\n    // if word contains punctuation\n    if (/[.?!]/.test(word.punct)) {\n      paragraph.words.push(word);\n      paragraph.text.push(word.punct);\n      results.push(paragraph);\n      // reset paragraph\n      paragraph = { words: [], text: [] };\n    } else {\n      paragraph.words.push(word);\n      paragraph.text.push(word.punct);\n    }\n  });\n\n  return results;\n};\n\nconst bbcKaldiToDraft = (bbcKaldiJson) => {\n  const results = [];\n  let tmpWords;\n\n  // BBC Octo Labs API Response wraps Kaldi response around retval,\n  // while kaldi contains word attribute at root\n  if (bbcKaldiJson.retval !== undefined) {\n    tmpWords = bbcKaldiJson.retval.words;\n  } else {\n    tmpWords = bbcKaldiJson.words;\n  }\n\n  const wordsByParagraphs = groupWordsInParagraphs(tmpWords);\n\n  wordsByParagraphs.forEach((paragraph, i) => {\n    const draftJsContentBlockParagraph = {\n      text: paragraph.text.join(' '),\n      type: 'paragraph',\n      data: {\n        speaker: `TBC ${ i }`,\n        words: paragraph.words,\n        start: paragraph.words[0].start\n      },\n      // the entities as ranges are each word in the space-joined text,\n      // so it needs to be compute for each the offset from the beginning of the paragraph and the length\n      entityRanges: generateEntitiesRanges(paragraph.words, 'punct'), // wordAttributeName\n    };\n    // console.log(JSON.stringify(draftJsContentBlockParagraph,null,2))\n    results.push(draftJsContentBlockParagraph);\n  });\n\n  return results;\n};\n\nexport default bbcKaldiToDraft;\n","/**\n * Convert autoEdit2 Json\n *\n * into\n *\n ```\n const blocks = [\n        {\n            text: 'Hello',\n            type: 'paragraph',\n            data: {\n            speaker: 'Foo',\n            },\n            entityRanges: [],\n        },\n        {\n            text: 'World',\n            type: 'paragraph',\n            data: {\n            speaker: 'Bar',\n            },\n            entityRanges: [],\n        },\n        ];\n```\n *\n * See samples folder and test file\n * for reference data structures\n */\n\nimport generateEntitiesRanges from '../generate-entities-ranges/index';\n\n/**\n * groups words list from autoEdit transcript based on punctuation.\n * @todo To be more accurate, should introduce an honorifics library to do the splitting of the words.\n * @param {array} words - array of words objects from autoEdit transcript\n */\n\nconst groupWordsInParagraphs = (autoEditText) => {\n  const results = [];\n  let paragraph = { words: [], text: [] };\n\n  autoEditText.forEach((autoEditparagraph) => {\n    autoEditparagraph.paragraph.forEach((autoEditLine) => {\n      autoEditLine.line.forEach((word) => {\n        // adjusting time reference attributes from\n        // `startTime` `endTime` to `start` `end`\n        // for word object\n        const tmpWord = {\n          text: word.text,\n          start: word.startTime,\n          end: word.endTime,\n        };\n        //  if word contains punctuation\n        if (/[.?!]/.test(word.text)) {\n          paragraph.words.push(tmpWord);\n          paragraph.text.push(word.text);\n          results.push(paragraph);\n          // reset paragraph\n          paragraph = { words: [], text: [] };\n        } else {\n          paragraph.words.push(tmpWord);\n          paragraph.text.push(word.text);\n        }\n      });\n    });\n  });\n\n  return results;\n};\n\nconst autoEdit2ToDraft = (autoEdit2Json) => {\n  const results = [];\n  const tmpWords = autoEdit2Json.text;\n  const wordsByParagraphs = groupWordsInParagraphs(tmpWords);\n\n  wordsByParagraphs.forEach((paragraph, i) => {\n    const draftJsContentBlockParagraph = {\n      text: paragraph.text.join(' '),\n      type: 'paragraph',\n      data: {\n        speaker: `TBC ${ i }`,\n        words: paragraph.words, \n        start: paragraph.words[0].start\n      },\n      // the entities as ranges are each word in the space-joined text,\n      // so it needs to be compute for each the offset from the beginning of the paragraph and the length\n      entityRanges: generateEntitiesRanges(paragraph.words, 'text'),\n    };\n    // console.log(JSON.stringify(draftJsContentBlockParagraph,null,2))\n    results.push(draftJsContentBlockParagraph);\n  });\n\n  // console.log(JSON.stringify(results,null,2))\n  return results;\n};\n\nexport default autoEdit2ToDraft;\n","import bbcKaldiToDraft from './bbc-kaldi/index';\nimport autoEdit2ToDraft from './autoEdit2/index';\n/**\n * Adapters for STT conversion\n * @param {json} transcriptData - A json transcript with some word accurate timecode\n * @param {string} sttJsonType - the type of transcript supported by the available adapters\n */\n\n// converts nested arrays into one dimensional array\nconst flatten = list => list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n\nconst createEntityMap = (blocks) => {\n  const entityRanges = blocks.map(block => block.entityRanges);\n  // eslint-disable-next-line no-use-before-define\n  const flatEntityRanges = flatten(entityRanges);\n\n  const entityMap = {};\n\n  flatEntityRanges.forEach((data) => {\n    entityMap[data.key] = {\n      type: 'WORD',\n      mutability: 'MUTABLE',\n      data,\n    };\n  });\n\n  return entityMap;\n};\n\nconst sttJsonAdapter = (transcriptData, sttJsonType) => {\n  let blocks;\n  switch (sttJsonType) {\n  case 'bbckaldi':\n    blocks = bbcKaldiToDraft(transcriptData);\n\n    return { blocks, entityMap: createEntityMap(blocks) };\n  case 'autoedit2':\n    blocks = autoEdit2ToDraft(transcriptData);\n\n    return { blocks, entityMap: createEntityMap(blocks) };\n  case 'draftjs':\n    return transcriptData; // (typeof transcriptData === 'string')? JSON.parse(transcriptData): transcriptData;\n  default:\n    // code block\n    console.error('not recognised the stt enginge');\n  }\n};\n\nexport default sttJsonAdapter;\n","import draftToTxt from './txt/index';\n/**\n * Adapters for Draft.js conversion\n * @param {json} blockData - Draft.js blocks\n * @param {string} exportFormat - the type of file supported by the available adapters\n */\n\nconst exportAdapter = (blockData, exportFormat) => {\n  switch (exportFormat) {\n  case 'draftjs':\n    return { data: JSON.stringify(blockData, null,2), ext: 'json' };\n  case 'txt':\n    return { data: draftToTxt(blockData), ext: 'txt' };\n  default:\n    // code block\n    console.error('Did not recognise the export format');\n  }\n};\n\nexport default exportAdapter;\n","export default (blockData) => {\n  const lines = blockData.blocks.map(x => x.text);\n\n  return lines.join('\\n\\n');\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass VideoPlayer extends React.Component {\n  render() {\n    return (\n      <video\n        id=\"video\"\n        playsInline\n        src={ this.props.mediaUrl }\n        onTimeUpdate={ this.props.onTimeUpdate }\n        type=\"video/mp4\"\n        data-testid=\"media-player-id\"\n        onClick={ this.props.onClick }\n        ref={ this.props.videoRef }\n      />\n    );\n  }\n}\n\nVideoPlayer.propTypes = {\n  mediaUrl: PropTypes.string,\n  onTimeUpdate: PropTypes.func,\n  onClick: PropTypes.func,\n  videoRef: PropTypes.object\n};\n\nexport default VideoPlayer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport style from './Select.module.css';\nclass Select extends React.Component {\n\n  render() {\n    const options = this.props.options.map((option, index) => {\n      // eslint-disable-next-line react/no-array-index-key\n      return <option key={ index } value={ option.value }>{option.label}</option>;\n    });\n    \n    return (\n      <select className={ style.selectPlayerControl }name={ this.props.name } defaultValue={ this.props.currentValue } onChange={ this.props.handleChange }>\n        {options}\n      </select>\n    );\n  }\n}\n\nSelect.propTypes = {\n  options: PropTypes.array,\n  name: PropTypes.string,\n  currentValue: PropTypes.string,\n  handleChange: PropTypes.func\n};\n\nexport default Select;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\n// import VolumeControl from './VolumeControl';\nimport Select from './Select';\nimport style from './PlayerControls.module.css';\n\nclass PlayerControls extends React.Component {\n  // to handle backward and forward mouse pressed on btn\n  // set a 300 ms  interval to repeat the\n  // backward or forward function\n  // on mouseUp the interval is cleared\n  setIntervalHelperBackward = () => {\n    this.interval = setInterval(() => {\n      this.props.skipBackward();\n    }, 300);\n  }\n\n  setIntervalHelperForward = () => {\n    this.interval = setInterval(() => {\n      this.props.skipForward();\n    }, 300);\n  }\n\n  clearIntervalHelper = () => {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    return (\n      <div className={ style.playerControls }>\n        <button\n          className={ style.playerButton }\n          onClick={ this.props.rollback }>\n          {'↺'}\n        </button>\n\n        <button\n          className={ style.playerButton }\n          onMouseDown={ this.setIntervalHelperBackward }\n          onMouseUp={ this.clearIntervalHelper }>\n          {'◀◀'}\n        </button>\n\n        <button\n          className={ style.playerButton }\n          onClick={ this.props.playMedia }>\n          {this.props.isPlaying ? '❚❚' : '▶'}\n        </button>\n\n        <button\n          className={ style.playerButton }\n          onMouseDown={ this.setIntervalHelperForward }\n          onMouseUp={ this.clearIntervalHelper }>\n          {'▶▶'}\n        </button>\n\n        <button\n          className={ style.playBackRate }>\n          x<Select\n            options={ [ { value:'0.25',label:'0.25' },\n              { value:'0.5',label:'0.5' },\n              { value:'0.75',label:'0.75' },\n              { value:'1',label:'1' },\n              { value:'1.25',label:'1.25' },\n              { value:'1.5',label:'1.5' },\n              { value:'1.75',label:'1.75' },\n              { value:'2',label:'2' },\n              { value:'2.5',label:'2.5' },\n              { value:'3',label:'3' },\n              { value:'3.5',label:'3.5' } ] }\n            currentValue={ this.props.playBackRate.toString() }\n            name={ 'playbackRate' }\n            handleChange={ this.props.setPlayBackRate }\n          />\n         \n        </button>\n\n        <div className={ style.timeBox }>\n          <span className={ style.currentTime } \n            onClick={ this.props.promptSetCurrentTime }\n          >{ this.props.currentTime }</span>\n          <span className={ style.separator }>|</span>\n          <span className={ style.duration }>{this.props.duration}</span>\n        </div>\n\n        {/* <VolumeControl\n          handleMuteVolume={ this.props.handleMuteVolume }\n        /> */}\n      </div>\n    );\n  }\n}\n\nPlayerControls.propTypes = {\n  playMedia: PropTypes.func,\n  currentTime: PropTypes.string,\n  timecodeOffset: PropTypes.string,\n  promptSetCurrentTime: PropTypes.func,\n  rollback: PropTypes.func,\n  handleMuteVolume: PropTypes.func,\n  duration: PropTypes.string,\n  isPlaying: PropTypes.bool,\n  skipBackward: PropTypes.func,\n  skipForward: PropTypes.func\n};\n\nexport default PlayerControls;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport style from './ProgressBar.module.css';\n\nclass ProgressBar extends React.Component {\n\n  render() {\n    return (\n      <div className={ style.progress }>\n        <input\n          type='range'\n          className={ style.bar }\n          onChange={ this.props.buttonClick }\n          value={ this.props.value }\n          min='0'\n          max={ this.props.max }\n        />\n      </div>\n    );\n  }\n}\n\nProgressBar.propTypes = {\n  value: PropTypes.number,\n  max: PropTypes.number,\n  buttonClick: PropTypes.func\n};\n\nexport default ProgressBar;\n","function returnHotKeys(self) {\n  return {\n    esc: {\n      priority: 1,\n      handler: () => { self.togglePlayMedia(); },\n      helperText: 'Play Media',\n    },\n    'ctrl+k': { // combo from mousetrap\n      priority: 1,\n      handler: () => { self.promptSetCurrentTime(); },\n      helperText: 'set current time',\n    },\n    'ctrl+1': {\n      priority: 1,\n      handler: () => { self.skipForward(); console.log('Skip Forward'); },\n      helperText: 'Skip Forward',\n    },\n    'ctrl+2': {\n      priority: 1,\n      handler: () => { self.skipBackward(); console.log('Skip Backward'); },\n      helperText: 'Skip Backward',\n    },\n    'ctrl+3': {\n      priority: 1,\n      handler: () => { self.decreasePlaybackRate(); console.log('Speed Up - increase playbackRate'); },\n      helperText: 'Speed Up ',\n    },\n    'ctrl+4': {\n      priority: 1,\n      handler: () => { self.increasePlaybackRate(); console.log('Speed Down - Decrease playbackRate'); },\n      helperText: 'Speed Down',\n    },\n    'ctrl+5': {\n      priority: 1,\n      handler: () => { self.rollBack(); },\n      helperText: 'Roll Back',\n    }\n    // ,'ctrl+/': {\n    //     priority: 1,\n    //     handler: (event) => { console.log('show hide shortcuts');},\n    //     helperText: 'Show/Hide shortcuts'\n    // }\n    // ,'ctrl+s': {\n    //     priority: 1,\n    //     handler: (event) => { console.log('save');},\n    //     helperText: 'Save'\n    // }\n  };\n}\nexport default returnHotKeys;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { hotkeys } from 'react-keyboard-shortcuts';\n\nimport VideoPlayer from './VideoPlayer';\nimport PlayerControls from './PlayerControls';\nimport ProgressBar from './ProgressBar';\n\nimport returnHotKeys from './defaultHotKeys';\nimport styles from './index.module.css';\n\nimport { secondsToTimecode, timecodeToSeconds } from '../../Util/timecode-converter/index';\n\nclass MediaPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = React.createRef();\n\n    this.state = {\n      playBackRate: 1,\n      rollBackValueInSeconds: this.props.rollBackValueInSeconds,\n      timecodeOffset: this.props.timecodeOffset,\n      hotKeys: returnHotKeys(this),\n      isPlaying: false\n    };\n  }\n  /*eslint-disable camelcase */\n  hot_keys = returnHotKeys(this);\n\n  static getDerivedStateFromProps(nextProps) {\n    if (nextProps.timecodeOffset !== null) {\n      let newCurrentTimeInSeconds = nextProps.timecodeOffset ;\n      if (typeof newCurrentTimeInSeconds ==='string' \n        && newCurrentTimeInSeconds.includes(':')\n        && !newCurrentTimeInSeconds.includes('NaN')) {\n        newCurrentTimeInSeconds = timecodeToSeconds(nextProps.timecodeOffset );\n      }\n      \n      return {\n        timecodeOffset: newCurrentTimeInSeconds,\n        rollBackValueInSeconds: nextProps.rollBackValueInSeconds\n      };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.timecodeOffset !== this.state.timecodeOffset) {\n      //   this.loadData();\n      // this.setTimeCodeOffset(this.statetimecodeOffset);\n    }\n  }\n\n  componentDidMount() {\n    this.props.hookSeek(this.setCurrentTime);\n    this.props.hookPlayMedia(this.togglePlayMedia);\n    this.props.hookIsPlaying(this.isPlaying);\n  }\n\n  setCurrentTime = (newCurrentTime) => {\n    if (newCurrentTime !== '' && newCurrentTime !== null) {\n    // hh:mm:ss:ff - mm:ss - m:ss - ss - seconds number or string and hh:mm:ss\n      const newCurrentTimeInSeconds = timecodeToSeconds(newCurrentTime);\n      if (this.videoRef.current !== null) {\n        const videoRef = this.videoRef.current;\n\n        if (videoRef.readyState === 4) {\n          videoRef.currentTime = newCurrentTimeInSeconds;\n          this.playMedia();\n        }\n      }\n    }\n  }\n\n  promptSetCurrentTime = () => {\n    console.log('promptSetCurrentTime');\n    this.setCurrentTime( prompt('Jump to time - hh:mm:ss:ff hh:mm:ss mm:ss m:ss m.ss seconds'));\n  }\n\n  setTimeCodeOffset = (newTimeCodeOffSet) => {\n    if (newTimeCodeOffSet !== '' && newTimeCodeOffSet !== null) {\n      // use similar helper function from above to convert\n      let newCurrentTimeInSeconds = newTimeCodeOffSet;\n      if (newTimeCodeOffSet.includes(':')) {\n        newCurrentTimeInSeconds = timecodeToSeconds(newTimeCodeOffSet);\n        this.setState({ timecodeOffset: newCurrentTimeInSeconds });\n      }\n    }\n  }\n\n  rollBack = () => {\n    if (this.videoRef.current !== null) {\n      // get video duration\n      const videoElem = this.videoRef.current;\n      const tmpDesiredCurrentTime = videoElem.currentTime - this.state.rollBackValueInSeconds;\n      // > 0 < duration of video\n      this.setCurrentTime(tmpDesiredCurrentTime);\n    }\n  }\n\n  handleTimeUpdate = (e) => {\n    // eslint-disable-next-line react/prop-types\n    this.props.hookOnTimeUpdate(e.target.currentTime);\n  }\n\n  handlePlayBackRateChange = (e) => {\n    this.setPlayBackRate(e.target.value);\n  }\n\n  getCurrentPlaybackRate = () => {\n    if (this.videoRef.current !== null) {\n      return this.videoRef.current.playbackRate;\n    }\n  }\n\n  setPlayBackRate = (speedValue) => {\n    console.log(speedValue);\n    // value between 0.2 and 3.5\n    if (this.videoRef.current !== null) {\n      if (speedValue >= 0.2 && speedValue <= 3.5) {\n        this.setState({\n          playBackRate: speedValue,\n        }, () => {\n          this.videoRef.current.playbackRate = speedValue;\n        });\n      }\n    }\n  }\n\n  handleChangeReplayRollbackValue = (e) => {\n    if (this.videoRef.current !== null) {\n      this.setState({\n        rollBackValueInSeconds: e.target.value,\n      });\n    }\n  }\n\n  handleMuteVolume = () => {\n    if (this.videoRef.current !== null) {\n      if (this.videoRef.current.volume > 0) {\n        this.videoRef.current.volume = 0;\n      } else {\n        this.videoRef.current.volume = 1;\n      }\n    }\n  }\n\n  // TEMP: keeping this in for now. Might be replaced by state\n  // The pauseWhileTyping logic (in TimedTextEditor) currently uses this\n  isPlaying = () => {\n    if (this.videoRef.current !== null) {\n      if (this.videoRef.current.paused) return false;\n\n      return true;\n    }\n  }\n\n  pauseMedia = () => {\n    this.setState({ isPlaying: false }, () => this.videoRef.current.pause());\n  }\n\n  playMedia = () => {\n    this.setState({ isPlaying: true }, () => this.videoRef.current.play());\n  }\n\n  // Sets isPlaying state and toggles modes on the video player\n  // TODO: modularise these / enable specific play / pause action\n  togglePlayMedia = () => {\n    if (this.videoRef.current !== null) {\n      if (this.state.isPlaying) {\n        this.pauseMedia();\n      }\n      else {\n        this.playMedia();\n      }\n    }\n  }\n\n  skipForward = () => {\n    if (this.videoRef.current !== null) {\n      const currentTime = this.videoRef.current.currentTime;\n      const newCurrentTimeIncreased = currentTime + 10;\n      const newCurrentTime = Number((newCurrentTimeIncreased).toFixed(1));\n      this.setCurrentTime(newCurrentTime);\n    }\n  }\n\n  skipBackward = () => {\n    if (this.videoRef.current !== null) {\n      const currentTime = this.videoRef.current.currentTime;\n      const newCurrentTimeIncreased = currentTime - 10;\n      const newCurrentTime = Number((newCurrentTimeIncreased).toFixed(1));\n      this.setCurrentTime(newCurrentTime);\n    }\n  }\n\n  handleProgressBarClick = (e) => {\n    const time = e.target.value;\n    this.setCurrentTime(time);\n  }\n\n  getMediaCurrentTime = () => {\n    if (this.videoRef.current !== null) {\n      return secondsToTimecode(this.videoRef.current.currentTime + this.state.timecodeOffset);\n    }\n\n    return '00:00:00:00';\n  }\n\n  getMediaDuration = () => {\n    if (this.videoRef.current !== null) {\n      return secondsToTimecode(this.videoRef.current.duration + this.state.timecodeOffset);\n    }\n\n    return '00:00:00:00';\n  }\n\n  render() {\n    const player = <VideoPlayer\n      mediaUrl={ this.props.mediaUrl }\n      onTimeUpdate= { this.handleTimeUpdate }\n      onClick= { this.togglePlayMedia.bind(this) }\n      videoRef={ this.videoRef }\n    />;\n\n    const playerControlsSection = (\n      <div className={ styles.controlsSection }>\n        <div className={ styles.titleBox }>\n          <h1 className={ styles.title }>{ this.props.mediaUrl }</h1>\n        </div>\n        <PlayerControls\n          playMedia={ this.togglePlayMedia.bind(this) }\n          isPlaying={ this.state.isPlaying }\n          playBackRate={ this.state.playBackRate }\n          skipBackward={ this.skipBackward.bind(this) }\n          skipForward={ this.skipForward.bind(this) }\n          rollback={ this.rollBack }\n          currentTime={ this.getMediaCurrentTime() }\n          duration={ this.getMediaDuration() }\n          onSetCurrentTime={ '' }\n          onSetTimecodeOffset={ '' }\n          promptSetCurrentTime={ this.promptSetCurrentTime.bind(this) }\n          setTimeCodeOffset={ this.setTimeCodeOffset.bind(this) }\n          timecodeOffset={ secondsToTimecode(this.state.timecodeOffset) }\n          handleMuteVolume={ this.handleMuteVolume.bind(this) }\n          setPlayBackRate={ this.handlePlayBackRateChange.bind(this) }\n        />\n      </div>\n    );\n\n    const progressBar = <ProgressBar\n      max={ this.videoRef.current !== null ? parseInt(this.videoRef.current.duration) : 100 }\n      value={ this.videoRef.current !== null ? parseInt(this.videoRef.current.currentTime) : 0 }\n      buttonClick={ this.handleProgressBarClick.bind(this) }\n    />;\n\n    return (\n      <section className={ styles.topSection }>\n        <div className={ styles.playerSection }>\n          { this.props.mediaUrl !== null ? player : null }\n          { this.props.mediaUrl !== null ? playerControlsSection : null }\n        </div>\n        { this.props.mediaUrl !== null ? progressBar : null }\n      </section>\n    );\n  }\n}\n\nMediaPlayer.propTypes = {\n  hookSeek: PropTypes.func,\n  hookPlayMedia: PropTypes.func,\n  hookIsPlaying: PropTypes.func,\n  mediaUrl: PropTypes.string,\n  hookOnTimeUpdate: PropTypes.func,\n};\n\nexport default hotkeys(MediaPlayer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './index.module.css';\nimport style from '../index.module.css';\nclass Toggle extends React.Component {\n\n  render() {\n    return (\n      <div className={  style.settingElement  }>\n        <label className={ styles.switch }>\n          <input type=\"checkbox\"\n            defaultChecked={ this.props.defaultValue }\n            onChange={ this.props.handleToggle }\n          />\n          <span className={ styles.slider }></span>\n        </label>\n        {/* <label className={ styles.label }>{this.props.label}</label> */}\n      </div>\n    );\n  }\n}\n\nToggle.propTypes = {\n  handleToggle: PropTypes.func,\n  label: PropTypes.string\n};\n\nexport default Toggle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n// import styles from '../index.module.css';\nimport { timecodeToSeconds, secondsToTimecode } from '../../../Util/timecode-converter/index';\n\nclass TimecodeOffset extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      timecodeOffset: secondsToTimecode(this.props.timecodeOffset)\n    };\n  }\n    handleChange = (e) => {\n      console.log( e.target.value);\n     \n      this.setState({\n        timecodeOffset: e.target.value\n      });\n    }\n\n    resetTimecodeOffset = () => {\n      const resetTimecodeOffsetValue = 0;\n      this.setState({\n        timecodeOffset: secondsToTimecode(resetTimecodeOffsetValue)\n      },() => {\n        this.props.handleSetTimecodeOffset(resetTimecodeOffsetValue);\n      });\n    }\n\n    setTimecodeOffset = () => {\n      console.log(this.state.timecodeOffset);\n      let newCurrentTimeInSeconds = this.state.timecodeOffset;\n      if (typeof newCurrentTimeInSeconds ==='string' \n      && newCurrentTimeInSeconds.includes(':')\n      && !newCurrentTimeInSeconds.includes('NaN')) {\n        newCurrentTimeInSeconds = timecodeToSeconds(newCurrentTimeInSeconds );\n      }\n      this.props.handleSetTimecodeOffset(newCurrentTimeInSeconds);\n    }\n\n    render() {\n      return (\n        <div >\n          <label>Timecode Offset ℹ </label>\n          <input \n            type=\"text\" \n            value={ this.state.timecodeOffset } \n            onChange={ this.handleChange }\n            name=\"lname\"/>\n          <small onClick={ this.resetTimecodeOffset }><u>Reset</u></small> | \n          <small onClick={ this.setTimecodeOffset }><u>Save</u></small>\n        </div>\n      );\n    }\n}\n\nTimecodeOffset.propTypes = {\n  handleSetTimecodeOffset: PropTypes.func,\n  onChange: PropTypes.func\n};\n\nexport default TimecodeOffset;\n","import React from 'react';\n// eslint-disable-next-line no-unused-vars\nimport PropTypes from 'prop-types';\nimport Toggle from './Toggle/index.js';\nimport style from './index.module.css';\nimport TimecodeOffset from './TimecodeOffset/index.js';\n\nclass Settings extends React.Component {\n  // eslint-disable-next-line class-methods-use-this\n  render() {\n    return (\n      <div>\n        <span>Settings Panel</span>\n        <div className={ style.controlsContainer }>\n          <section className={ style.settingElement }>\n            <label>Pause While Typing</label>\n            <Toggle \n              defaultValue={ this.props.defaultValuePauseWhileTyping }\n              label={ 'Pause while typing' } \n              handleToggle={ this.props.handlePauseWhileTyping }\n            />\n          </section>\n          <section className={ style.settingElement }>\n            <label> Scroll Sync</label>\n            <Toggle \n              defaultValue={ this.props.defaultvalueScrollSync }\n              label={ 'ScrollSync' } \n              handleToggle={ this.props.handleIsScrollIntoViewChange }\n            />\n          </section>\n          <section className={ style.settingElement }>\n            <label>RollBack Interval, seconds</label>\n            <input \n              type=\"text\" \n              value={ this.props.defaultRollBackValueInSeconds } \n              onChange={ this.props.handleRollBackValueInSeconds }\n              name=\"lname\"/>\n            {/* <input type=\"range\" value=\"15\" min=\"1\" max=\"60\" step=\"1\"/> */}\n          </section>\n          <section className={ style.settingElement }>\n            <label>Hide Timecodes</label>\n            <Toggle \n              defaultValue={ this.props.showTimecodes }\n              label={ 'Hide Timecodes' } \n              handleToggle={ this.props.handleShowTimecodes }\n            />\n          </section>\n          <section className={ style.settingElement }>\n            <label>Hide Speaker Labels</label>\n            <Toggle \n              defaultValue={ this.props.showSpeakers }\n              label={ 'Hide Speaker Labels' } \n              handleToggle={ this.props.handleShowSpeakers }\n            />\n          </section>\n          <TimecodeOffset \n            timecodeOffset={ this.props.timecodeOffset }\n            handleSetTimecodeOffset={ this.props.handleSetTimecodeOffset }\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {};\n\nexport default Settings;\n","import React from 'react';\n// eslint-disable-next-line no-unused-vars\nimport PropTypes from 'prop-types';\n// import Toggle from './Toggle/index.js';\nimport style from './index.module.css';\n// import TimecodeOffset from './TimecodeOffset/index.js';\n\nimport returnHotKeys from '../MediaPlayer/defaultHotKeys';\n\nclass KeyboardShortcutHelp extends React.Component {\n  // eslint-disable-next-line class-methods-use-this\n  render() {\n    const hotKeys = returnHotKeys(this);\n    const hotKeysCheatsheet = Object.keys(hotKeys).map((key,index ) => { \n    \tconst value = hotKeys[key];\n\n      return <li key={ index } className={ style.settingElement }><mark><code>{key}</code></mark> {value.helperText}</li>;\n    });\n    \n    return (\n      <div>\n        <span>ℹ Keyboard Shortcuts Help</span>\n        <br/>\n        <ul style={ { listStyle: 'none' } }>\n          {hotKeysCheatsheet}\n        </ul>\n      </div>\n    );\n  }\n}\n\nKeyboardShortcutHelp.propTypes = {};\n\nexport default KeyboardShortcutHelp;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport TimedTextEditor from './TimedTextEditor';\nimport MediaPlayer from './MediaPlayer';\nimport Settings from './Settings';\nimport KeyboardShortcutHelp from './KeyboardShortcutHelp';\nimport style from './index.module.css';\nimport styleSettings from './Settings/index.module.css';\nimport KeyboardShortcutHelpSettings from './KeyboardShortcutHelp/index.module.css';\n// import { timecodeToSeconds } from '../Util/timecode-converter/index';\n\nclass TranscriptEditor extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentTime: 0,\n      lastLocalSavedTime: '',\n      transcriptData: null,\n      isScrollIntoViewOn: false,\n      showSettings: false,\n      showKeyboardShortcutsHelp: false,\n      isPauseWhileTypingOn: true,\n      rollBackValueInSeconds: 15,\n      timecodeOffset: 0,\n      showTimecodes: true,\n      showSpeakers: true\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps) {\n    if (nextProps.transcriptData !== null) {\n      return {\n        transcriptData: nextProps.transcriptData\n      };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.transcriptData !== this.state.transcriptData) {\n      //   this.loadData();\n      if (this.refs.timedTextEditor.isPresentInLocalStorage(this.props.mediaUrl)) {\n        console.log('was already present in local storage');\n        this.refs.timedTextEditor.loadLocalSavedData(this.props.mediaUrl);\n      } else {\n        console.log('not present in local storage');\n      }\n    }\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  handleWordClick = (startTime) => {\n    this.setCurrentTime(startTime);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  handleTimeUpdate = (currentTime) => {\n    this.setState({\n      currentTime,\n    });\n  }\n\n  handlePlayMedia = (bool) => {\n    this.playMedia(bool);\n  }\n\n  handleIsPlaying = () => {\n    return this.isPlaying();\n  }\n\n  handleIsScrollIntoViewChange = (e) => {\n    const isChecked = e.target.checked;\n    this.setState({ isScrollIntoViewOn: isChecked });\n  }\n  handlePauseWhileTyping = (e) => {\n    const isChecked = e.target.checked;\n    this.setState({ isPauseWhileTypingOn: isChecked });\n  }\n\n  handleRollBackValueInSeconds = (e) => {\n    const rollBackValue = e.target.value;\n    console.log(rollBackValue);\n    this.setState({ rollBackValueInSeconds: rollBackValue });\n  }\n\n  handleSetTimecodeOffset = (timecodeOffset) => {\n    console.log('TranscriptEditor',timecodeOffset );\n    \n    this.setState({ timecodeOffset: timecodeOffset },\n      () => {\n        // eslint-disable-next-line react/no-string-refs\n        this.refs.timedTextEditor.forceUpdate();\n      });\n    // this.refs.MediaPlayer.setTimeCodeOffset('01:00:00:00');\n  }\n\n  handleShowTimecodes = (e) => {\n    console.log(e);\n    const isChecked = e.target.checked;\n    this.setState({ showTimecodes: isChecked },() => {\n      // eslint-disable-next-line react/no-string-refs\n      // this.refs.timedTextEditor.forceUpdate();\n    });\n  }\n\n  handleShowSpeakers = (e) => {\n    console.log(e);\n    const isChecked = e.target.checked;\n    this.setState({ showSpeakers: isChecked },() => {\n      // eslint-disable-next-line react/no-string-refs\n      // this.refs.timedTextEditor.forceUpdate();\n    });\n  }\n\n  getEditorContent = (exportFormat) => {\n    // eslint-disable-next-line react/no-string-refs\n    // return this.refs.timedTextEditor.getEditorContent(exportFormat);\n  }\n\n  handleSettingsToggle = () => {\n    this.setState(prevState => ({\n      showSettings: !prevState.showSettings\n    }));\n  }\n\n  handleKeyboardShortcutsHelpToggle = () => {\n    this.setState(prevState => ({\n      showKeyboardShortcutsHelp: !prevState.showKeyboardShortcutsHelp\n    }));\n  }\n\n  render() {\n    const mediaPlayer = <MediaPlayer\n      ref={ 'MediaPlayer' }\n      // eslint-disable-next-line no-return-assign\n      rollBackValueInSeconds={ this.state.rollBackValueInSeconds }\n      timecodeOffset={ this.state.timecodeOffset }\n      hookSeek={ foo => this.setCurrentTime = foo }\n      hookPlayMedia={ foo => this.playMedia = foo }\n      hookIsPlaying={ foo => this.isPlaying = foo }\n      hookOnTimeUpdate={ this.handleTimeUpdate }\n      mediaUrl={ this.props.mediaUrl }\n    />;\n    const settings = <div className={ styleSettings.settings }>\n      <span  onClick={ this.handleSettingsToggle }>X</span>\n      <Settings \n        defaultValuePauseWhileTyping={ this.state.isPauseWhileTypingOn }\n        defaultvalueScrollSync={ this.state.isScrollIntoViewOn }\n        defaultRollBackValueInSeconds={ this.state.rollBackValueInSeconds }\n        timecodeOffset={ this.state.timecodeOffset }\n        showTimecodes={ this.state.showTimecodes }\n        showSpeakers={ this.state.showSpeakers }\n        handlePauseWhileTyping={ this.handlePauseWhileTyping }\n        handleIsScrollIntoViewChange={ this.handleIsScrollIntoViewChange }\n        handleRollBackValueInSeconds={ this.handleRollBackValueInSeconds }\n        handleSetTimecodeOffset={ this.handleSetTimecodeOffset }\n        handleShowTimecodes={ this.handleShowTimecodes }\n        handleShowSpeakers={ this.handleShowSpeakers }\n      /> \n    </div>;\n\n    const KeyboardShortcutHelpElement = <div className={ KeyboardShortcutHelpSettings.settings }>\n      <span  onClick={ this.handleKeyboardShortcutsHelpToggle }>X</span>\n      <KeyboardShortcutHelp />\n    </div>;\n    \n    return (\n      <div className={ style.container }>\n        <aside className={ style.aside }>\n          { this.props.mediaUrl ? mediaPlayer : null }\n        </aside>\n\n        <button className={ style.settingsButton } onClick={ this.handleSettingsToggle }> ⚙ </button>\n        { this.state.showSettings? settings : null }\n        <button className={ style.settingsButton } onClick={ this.handleKeyboardShortcutsHelpToggle }> ℹ </button>\n        { this.state.showKeyboardShortcutsHelp? KeyboardShortcutHelpElement : null }\n\n        <main className={ style.main }>\n          <TimedTextEditor\n            transcriptData={ this.state.transcriptData }\n            timecodeOffset={ this.state.timecodeOffset }\n            onWordClick={ this.handleWordClick }\n            playMedia={ this.handlePlayMedia }\n            isPlaying={ this.handleIsPlaying }\n            currentTime={ this.state.currentTime }\n            isEditable={ this.props.isEditable }\n            sttJsonType={ this.props.sttJsonType }\n            ref={ 'timedTextEditor' }\n            mediaUrl={ this.props.mediaUrl }\n            isScrollIntoViewOn={ this.state.isScrollIntoViewOn }\n            isPauseWhileTypingOn={ this.state.isPauseWhileTypingOn }\n            showTimecodes={ this.state.showTimecodes }\n            showSpeakers={ this.state.showSpeakers }\n          />\n        </main>\n      </div>\n    );\n  }\n}\n\nTranscriptEditor.propTypes = {\n  mediaUrl: PropTypes.string,\n  isEditable: PropTypes.bool,\n  sttJsonType: PropTypes.string,\n};\n\nexport default TranscriptEditor;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst SttTypeSelect = props => (<select name={ props.name } value={ props.value } onChange={ props.handleChange }>\n  <option value=\"bbckaldi\">BBC Kaldi</option>\n  <option value=\"draftjs\">Draft Js</option>\n  <option value=\"gentle-transcript\" disabled>Gentle Transcript</option>\n  <option value=\"gentle-alignement\" disabled>Gentle Alignement</option>\n  <option value=\"iiif\" disabled>IIIF</option>\n  <option value=\"autoedit2\">autoEdit 2</option>\n  <option value=\"ibm\" disabled>IBM Watson STT</option>\n  <option value=\"speechmatics\" disabled>Speechmatics</option>\n  <option value=\"assemblyai\" disabled>AssemblyAI</option>\n  <option value=\"rev\" disabled>Rev</option>\n  <option value=\"srt\" disabled>Srt</option>\n  <option value=\"vtt\" disabled>VTT</option>\n  <option value=\"vtt-youtube\" disabled>Youtube VTT</option>\n</select>);\n\nSttTypeSelect.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.string,\n  handleChange: PropTypes.func\n};\n\nexport default SttTypeSelect;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst ExportFormatSelect = props => (<select name={ props.name } value={ props.value } onChange={ props.handleChange }>\n  <option value=\"draftjs\">Draft Js</option>\n  <option value=\"txt\">Text file</option>\n  <option value=\"html\" disabled>HTML</option>\n  <option value=\"word\" disabled>MS Word</option>\n</select>);\n\nExportFormatSelect.propTypes = {\n  name: PropTypes.string,\n  value: PropTypes.string,\n  handleChange: PropTypes.func\n};\n\nexport default ExportFormatSelect;\n","import React from 'react';\nimport { render } from 'react-dom';\n\nimport { TranscriptEditor } from './lib';\n\nimport kaldiTedTalkTranscript from './sample-data/KateDarling_2018S-bbc-kaldi.json';\nimport style from './index.module.css';\nimport SttTypeSelect from './select-stt-json-type';\nimport ExportFormatSelect from './select-export-format';\n\nconst tedTalkVideoUrl = 'https://download.ted.com/talks/KateDarling_2018S-950k.mp4';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transcriptData: null,\n      mediaUrl: null,\n      isTextEditable: true,\n      sttType: 'bbckaldi',\n    };\n    // this.handleChangeLoadTranscriptJson = this.handleChangeLoadTranscriptJson.bind(this);\n  }\n\n  loadDemo() {\n    this.setState({\n      transcriptData: kaldiTedTalkTranscript,\n      mediaUrl: tedTalkVideoUrl,\n      sttType: 'bbckaldi',\n    });\n  }\n\n  // https://stackoverflow.com/questions/8885701/play-local-hard-drive-video-file-with-html5-video-tag\n  handleChangeLoadMedia(files) {\n    console.log(files);\n    const file = files[0];\n    const type = file.type;\n    // check if is playable\n    const videoNode = document.createElement('video');\n    const canPlay = videoNode.canPlayType(type);\n    if (canPlay) {\n      const fileURL = URL.createObjectURL(file);\n      // videoNode.src = fileURL\n      this.setState({\n        // transcriptData: kaldiTedTalkTranscript,\n        mediaUrl: fileURL,\n      });\n    }\n  }\n\n  handleChangeLoadMediaUrl() {\n    const fileURL = prompt(\"Paste the URL you'd like to use here\");\n\n    this.setState({\n      // transcriptData: kaldiTedTalkTranscript,\n      mediaUrl: fileURL,\n    });\n  }\n\n  handleChangeLoadTranscriptJson(files) {\n    const self = this;\n    const file = files[0];\n    // let type = file.type;\n    // TODO: add checks\n    // let transcriptJsonContent = FileReader.readAsText(file)\n    const fr = new FileReader();\n    fr.onload = function (e) {\n      // e.target.result should contain the text\n      console.log(JSON.parse(e.target.result));\n      self.setState({\n        transcriptData: JSON.parse(e.target.result),\n        // mediaUrl: tedTalkVideoUrl\n      });\n    };\n    fr.readAsText(file);\n  }\n\n  handleIsTextEditable = () => {\n    this.setState((prevState) => ({ isTextEditable: (prevState.isTextEditable) !== true }));\n  }\n\n  // https://stackoverflow.com/questions/21733847/react-jsx-selecting-selected-on-selected-select-option\n  handleSttTypeChange = (event) => {\n    console.log(event.target.name, event.target.value);\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  handleExportFormatChange = (event) => {\n    console.log(event.target.name, event.target.value);\n    this.setState({ [event.target.name]: event.target.value });\n  }\n\n  exportTranscript = () => {\n    // eslint-disable-next-line react/no-string-refs\n    const { data, ext } = this.refs.transcriptEditor.getEditorContent(this.state.exportFormat);\n    this.download(data, `${ this.state.mediaUrl }.${ ext }`);\n  }\n\n  // https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file\n   download = (content, filename, contentType) => {\n     const type = contentType || 'application/octet-stream';\n     const a = document.createElement('a');\n     const blob = new Blob([ content ], { type: type });\n\n     a.href = window.URL.createObjectURL(blob);\n     a.download = filename;\n     a.click();\n   }\n\n   clearLocalStorage = () => {\n     localStorage.clear();\n     console.info('cleared local storage');\n   }\n\n   render() {\n     return (\n       <div className={ style.container }>\n         <span className={ style.title }>\n            Demo page for <mark>React Transcript Editor</mark> - Component |{' '}\n           <a\n             href=\"https://github.com/bbc/react-transcript-editor\"\n             rel=\"noopener noreferrer\"\n             target=\"_blank\"\n           >\n            Github Repo\n           </a>\n         </span>\n         <br />\n         <button onClick={ () => this.loadDemo() }>load demo</button>\n         <hr />\n         <label>open Transcript Json</label>\n         <SttTypeSelect\n           name={ 'sttType' }\n           value={ this.state.sttType }\n           handleChange={ this.handleSttTypeChange }\n         />\n         <input\n           type=\"file\"\n           onChange={ e => this.handleChangeLoadTranscriptJson(e.target.files) }\n         />\n\n         <br />\n         <label>Load Local Media</label>\n         <input\n           type=\"file\"\n           onChange={ e => this.handleChangeLoadMedia(e.target.files) }\n         />\n         or \n         <button onClick={ () => this.handleChangeLoadMediaUrl() }>\n          Load Media From Url\n         </button>\n\n         <br />\n         <label>Export transcript</label>\n         <button onClick={ () => this.exportTranscript() }>Export file</button>\n\n         <ExportFormatSelect\n           name={ 'exportFormat' }\n           value={ this.state.exportFormat }\n           handleChange={ this.handleExportFormatChange }\n         />\n         <br />\n         <label>Text Is Editable</label>\n         <label className={ style.switch }>\n           <input type=\"checkbox\"\n             defaultChecked=\"true\"\n             onChange={ this.handleIsTextEditable }\n           />\n           <span className={ style.slider }></span>\n         </label>\n         <br />\n         <button onClick={ () => this.clearLocalStorage() }>Clear Local Storage</button>\n         <hr/>\n\n         <TranscriptEditor\n           transcriptData={ this.state.transcriptData }\n           mediaUrl={ this.state.mediaUrl }\n           isEditable={ this.state.isTextEditable }\n           sttJsonType={ this.state.sttType }\n           // eslint-disable-next-line react/no-string-refs\n           ref={ 'transcriptEditor' }\n         />\n       </div>\n     );\n   }\n}\n\nrender(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-labs-red\":\"#a0372d\",\"color-light-grey\":\"#767676\",\"color-mid-grey\":\"#696969\",\"color-dark-grey\":\"#4a4a4a\",\"WrapperBlock\":\"WrapperBlock_WrapperBlock__KRhEE\",\"markers\":\"WrapperBlock_markers__oOsnW\",\"text\":\"WrapperBlock_text__1lDVY\",\"speaker\":\"WrapperBlock_speaker__3Jk4j\",\"time\":\"WrapperBlock_time__3Eatw\",\"EditLabel\":\"WrapperBlock_EditLabel__3cJzN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-light-grey\":\"#767676\",\"topSection\":\"MediaPlayer_topSection__1gJAM\",\"playerSection\":\"MediaPlayer_playerSection__y0g8M\",\"controlsSection\":\"MediaPlayer_controlsSection__wk446\",\"titleBox\":\"MediaPlayer_titleBox__2Hfgg\",\"title\":\"MediaPlayer_title__h7Ojg\",\"helpText\":\"MediaPlayer_helpText__2cZmN\",\"hideInMobile\":\"MediaPlayer_hideInMobile__GbrMc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-subt-green\":\"#69e3c2\",\"container\":\"TranscriptEditor_container__28OEI\",\"main\":\"TranscriptEditor_main__2aOzn\",\"aside\":\"TranscriptEditor_aside__1f7EK\",\"settingsButton\":\"TranscriptEditor_settingsButton__2_TCj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"src_container__2-l5-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"settings\":\"KeyboardShortcutHelp_settings__a0pAo\",\"controlsContainer\":\"KeyboardShortcutHelp_controlsContainer__2tm8g\",\"settingElement\":\"KeyboardShortcutHelp_settingElement__3lsM3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-light-grey\":\"#767676\",\"color-labs-red\":\"#a0372d\",\"bar\":\"ProgressBar_bar__xe2el\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"color-labs-red\":\"#a0372d\",\"switchContainer\":\"Toggle_switchContainer__2oMzU\",\"label\":\"Toggle_label__ewLfb\",\"switch\":\"Toggle_switch__39TJz\",\"slider\":\"Toggle_slider__1Lgir\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"DraftEditor-root\":\"TimedTextEditor_DraftEditor-root__28YV4\",\"editor\":\"TimedTextEditor_editor__2M5RK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"selectPlayerControl\":\"Select_selectPlayerControl__H_co4\"};"],"sourceRoot":""}