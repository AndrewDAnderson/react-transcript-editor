{"version":3,"sources":["lib/TranscriptEditor/MediaPlayer/index.module.css","lib/TranscriptEditor/TimedTextEditor/index.js","lib/TranscriptEditor/TimedTextEditor/Word.js","lib/TranscriptEditor/TimedTextEditor/adapters/generate-entities-ranges/index.js","lib/TranscriptEditor/TimedTextEditor/adapters/bbc-kaldi/index.js","lib/TranscriptEditor/TimedTextEditor/adapters/autoEdit2/index.js","lib/TranscriptEditor/TimedTextEditor/adapters/index.js","lib/TranscriptEditor/MediaPlayer/defaultHotKeys.js","lib/Util/timecode-converter/secondsToTimecode.js","lib/Util/timecode-converter/timecodeToSeconds.js","lib/Util/timecode-converter/padTimeToTimecode.js","lib/Util/timecode-converter/index.js","lib/TranscriptEditor/MediaPlayer/index.js","lib/TranscriptEditor/index.js","select-stt-json-type.js","index.js","lib/TranscriptEditor/index.module.css","index.module.css","lib/TranscriptEditor/TimedTextEditor/index.module.css"],"names":["module","exports","videoSection","progressBar","switch","slider","helpText","mutability","Word","data","this","props","entityKey","contentState","getEntity","getData","react_default","a","createElement","data-start","start","data-entity-key","key","className","children","PureComponent","generateEntitiesRanges","words","wordAttributeName","position","map","word","result","end","confidence","text","offset","length","Math","random","toString","substring","bbcKaldiToDraft","bbcKaldiJson","results","paragraph","forEach","test","punct","push","groupWordsInParagraphs","undefined","retval","draftJsContentBlockParagraph","join","type","speaker","entityRanges","autoEdit2ToDraft","autoEdit2Json","autoEditText","autoEditparagraph","autoEditLine","line","tmpWord","startTime","endTime","sttJsonAdapter","transcriptData","sttJsonType","console","error","TimedTextEditor","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleDoubleClick","event","element","nativeEvent","target","hasAttribute","parentElement","t","parseFloat","getAttribute","onWordClick","state","editorState","EditorState","createEmpty","isEditable","onChange","setState","loadData","prevProps","prevState","blocks","block","flatEntityRanges","flatten","entityMap","convertFromRaw","createWithContent","decorator","_this2","styles","editor","onDoubleClick","Draft","stripPastedStyles","nextProps","React","Component","list","reduce","b","concat","Array","isArray","CompositeDecorator","strategy","contentBlock","callback","findEntityRanges","character","getMutability","component","returnHotKeys","self","esc","priority","handler","playMedia","helperText","ctrl+k","promptSetCurrentTime","ctrl+1","skipForward","log","ctrl+2","skipBackward","ctrl+3","decreasePlaybackRate","ctrl+4","increasePlaybackRate","ctrl+5","rollBack","secondsToTimecode","seconds","framePerSeconds","fps","normalisedSeconds","Number","floor","toPrecision","toFixed","normalisePlayerTime","wholeSeconds","frames","_padZero","n","parseInt","timecodeToSecondsHelper","tc","s","split","timecodeToFrames","isOneDigit","str","padTimeToTimecode","time","timecode","includes","includesFullStop","replace","timecodeToSeconds","resultPadded","MediaPlayer","hot_keys","assertThisInitialized","setCurrentTime","newCurrentTime","newCurrentTimeInSeconds","videoRef","current","readyState","currentTime","play","prompt","setTimeCodeOffset","newTimeCodeOffSet","timecodeOffset","tmpDesiredCurrentTime","rollBackValueInSeconds","handleTimeUpdate","e","hookOnTimeUpdate","handlePlayBackRateChange","setPlayBackRate","value","newPlaybackRate","getCurrentPlaybackRate","playbackRate","speedValue","playBackRate","handleChangeReplayRollbackValue","handleMuteVolume","volume","isPlaying","paused","pause","handleProgressBarClick","lengthOfBar","offsetWidth","positionPercentage","clientX","offsetLeft","totalTime","max","roundNewCurrentTime","createRef","playbackRateInputRange","hotKeys","hookSeek","mediaPlayerEl","mediaUrl","id","playsInline","src","onTimeUpdate","data-testid","onClick","ref","playerControlsSection","duration","defaultChecked","min","step","keyboardShortcutsHelp","keys","shortcutKey","index","hotkeys","TranscriptEditor","handleWordClick","container","header","nav","TranscriptEditor_MediaPlayer","foo","main","TranscriptEditor_TimedTextEditor","footer","SttTypeSelect","name","handleChange","disabled","App","handleIsTextEditable","isTextEditable","handleSttTypeChange","defineProperty","sttType","kaldiTedTalkTranscript","files","file","document","canPlayType","fileURL","URL","createObjectURL","fr","FileReader","onload","JSON","parse","readAsText","title","href","rel","loadDemo","handleChangeLoadTranscriptJson","select_stt_json_type","handleChangeLoadMedia","handleChangeLoadMediaUrl","lib_TranscriptEditor","render","src_App","getElementById","aside"],"mappings":"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","file":"static/js/main.5c023449.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"videoSection\":\"MediaPlayer_videoSection__23OWQ\",\"progressBar\":\"MediaPlayer_progressBar__PxbES\",\"switch\":\"MediaPlayer_switch__3YgmV\",\"slider\":\"MediaPlayer_slider__2zorg\",\"helpText\":\"MediaPlayer_helpText__2cZmN\"};","import React from 'react';\nimport {\n  // Draft,\n  Editor,\n  EditorState,\n  // ContentState,\n  CompositeDecorator,\n  convertFromRaw\n} from 'draft-js';\n\nimport Word from './Word';\nimport sttJsonAdapter from './adapters/index.js';\nimport styles from './index.module.css';\n\nclass TimedTextEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      editorState: EditorState.createEmpty(),\n      transcriptData: this.props.transcriptData,\n      isEditable: this.props.isEditable,\n      sttJsonType: this.props.sttJsonType\n    };\n\n    this.onChange = (editorState) =>{\n      // DraftJs option editable\n      if(this.state.isEditable){\n        this.setState({ editorState });\n      }\n    } \n  }\n\n  componentDidMount() {\n    this.loadData();\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState){\n    if(nextProps.transcriptData !== null){\n      return {\n        transcriptData: nextProps.transcriptData,\n        isEditable: nextProps.isEditable\n      }\n    }\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if(prevState.transcriptData !== this.state.transcriptData){\n      this.loadData();\n    }\n  }\n\n  loadData() {\n    if (this.props.transcriptData !== null) {\n      const blocks = sttJsonAdapter(this.props.transcriptData, this.props.sttJsonType);\n      const entityRanges = blocks.map(block => block.entityRanges);\n      // eslint-disable-next-line no-use-before-define\n      const flatEntityRanges = flatten(entityRanges);\n      \n      const entityMap = {};\n\n      flatEntityRanges.forEach((data) => {\n        entityMap[ data.key ] = {\n            type: 'WORD',\n            mutability: 'MUTABLE',\n            data\n          }\n      });\n     \n      const contentState = convertFromRaw({ blocks, entityMap });\n\n      // eslint-disable-next-line no-use-before-define\n      const editorState = EditorState.createWithContent(contentState, decorator);\n\n      this.setState({ editorState });\n    }\n  }\n\n  // click on words - for navigation \n  // eslint-disable-next-line class-methods-use-this\n  handleDoubleClick = (event)=> {\n    // nativeEvent --> React giving you the DOM event \n    let element = event.nativeEvent.target;\n    // find the parent in Word that contains span with time-code start attribute\n    while (!element.hasAttribute('data-start') && element.parentElement) {\n      element = element.parentElement;\n    }\n\n    if (element.hasAttribute('data-start')) {\n      const t = parseFloat(element.getAttribute('data-start'));\n      //TODO: prop to jump to video <-- To connect with MediaPlayer\n      // this.props.seek(t);\n      this.props.onWordClick(t);\n      // TODO: pass current time of media to TimedTextEditor to know what text to highlight in this component  \n    }\n  }\n\n  render() {\n    return (\n        <section\n        className={ styles.editor }\n        onDoubleClick={ event => this.handleDoubleClick(event) }\n        // onClick={ event => this.handleOnClick(event) }\n        >\n            <Editor\n          editorState={ this.state.editorState }\n          onChange={ this.onChange }\n          stripPastedStyles\n        />\n            {/* <button onClick={() => this.loadData()}>load data</button> */}\n        </section>\n    );\n  }\n}\n\n// converts nested arrays into one dimensional array \nconst flatten = list =>\n  list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n\n// DraftJs decorator to recognize which entity is which \n// and know what to apply to what component \nconst getEntityStrategy = mutability => (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges(character => {\n    const entityKey = character.getEntity();\n    if (entityKey === null) {\n      return false;\n    }\n    return contentState.getEntity(entityKey).getMutability() === mutability;\n  }, callback);\n};\n\n// decorator definition - Draftjs \n// defines what to use to render the entity \nconst decorator = new CompositeDecorator([\n  {\n    strategy: getEntityStrategy('MUTABLE'),\n    component: Word\n  }\n]);\n\nexport default TimedTextEditor;\n","import React, { PureComponent } from 'react';\n\nclass Word extends PureComponent {\n  render() {\n    const data = this.props.entityKey\n      ? this.props.contentState.getEntity(this.props.entityKey).getData()\n      : {};\n\n    return (\n        <span data-start={ data.start } data-entity-key={ data.key } className=\"Word\">\n            {this.props.children}\n        </span>\n    );\n  }\n}\n\nexport default Word;\n","/**\n * Helper function to generate draft.js entities, \n * see unit test for example data structure\n * it adds offset and length to recognise word in draftjs\n */\n\n/**\n*  @param {json} words  - List of words\n*  @param {string} wordAttributeName - eg 'punct' or 'text' or etc. \n* attribute for the word object containing the text. eg word ={ punct:'helo', ... }\n*  or eg word ={ text:'helo', ... }\n*/\nconst generateEntitiesRanges = (words, wordAttributeName) => {\n    let position = 0;\n    return words.map((word) => {\n         const result =  {\n          start: word.start,\n          end: word.end,\n          confidence: word.confidence,\n          text: word[ wordAttributeName ],\n          offset: position,\n          length: word[ wordAttributeName ].length,\n          key: Math.random()\n            .toString(36)\n            .substring(6)\n          }\n          // increase position counter - to determine word offset in paragraph\n          position = position + word[ wordAttributeName ].length + 1;\n\n          return result;\n      })\n} \n\nexport default generateEntitiesRanges;","/**\n * Convert BBC Kaldi json\n ```\n {\n    \"action\": \"audio-transcribe\",\n    \"retval\": {\n      \"status\": true,\n      \"wonid\": \"octo:2692ea33-d595-41d8-bfd5-aa7f2d2f89ee\",\n      \"punct\": \"There is a day. About ten years ago when  ...\",\n      \"words\": [\n        {\n          \"start\": 13.02,\n          \"confidence\": 0.68,\n          \"end\": 13.17,\n          \"word\": \"there\",\n          \"punct\": \"There\",\n          \"index\": 0\n        },\n        {\n          \"start\": 13.17,\n          \"confidence\": 0.61,\n          \"end\": 13.38,\n          \"word\": \"is\",\n          \"punct\": \"is\",\n          \"index\": 1\n        },\n```\n *\n * into\n *\n ```\n const blocks = [\n        {\n            text: 'Hello',\n            type: 'paragraph',\n            data: {\n            speaker: 'Foo',\n            },\n            entityRanges: [],\n        },\n        {\n            text: 'World',\n            type: 'paragraph',\n            data: {\n            speaker: 'Bar',\n            },\n            entityRanges: [],\n        },\n        ];\n```\n *\n */\n\nimport generateEntitiesRanges from '../generate-entities-ranges/index.js';\n\n/**\n * groups words list from kaldi transcript based on punctuation.\n * @todo To be more accurate, should introduce an honorifics library to do the splitting of the words.\n * @param {array} words - array of words opbjects from kaldi transcript\n */\n\nconst groupWordsInParagraphs = words => {\n  const results = [];\n  let paragraph = { words: [], text: [] };\n\n  words.forEach(word => {\n    // if word contains punctuation\n    if (/[.?!]/.test(word.punct)) {\n      paragraph.words.push(word);\n      paragraph.text.push(word.punct);\n      results.push(paragraph);\n      // reset paragraph\n      paragraph = { words: [], text: [] };\n    } else {\n      paragraph.words.push(word);\n      paragraph.text.push(word.punct);\n    }\n  });\n\n  return results;\n};\n\nconst bbcKaldiToDraft = bbcKaldiJson => {\n  const results = [];\n  let tmpWords;\n\n  // BBC Octo Labs API Response wraps Kaldi response around retval,\n  // while kaldi contains word attribute at root\n  if (bbcKaldiJson.retval !== undefined) {\n    tmpWords = bbcKaldiJson.retval.words;\n  } else {\n    tmpWords = bbcKaldiJson.words;\n  }\n\n  const wordsByParagraphs = groupWordsInParagraphs(tmpWords);\n\n  wordsByParagraphs.forEach(paragraph => {\n    const draftJsContentBlockParagraph = {\n      text: paragraph.text.join(' '),\n      type: 'paragraph',\n      data: {\n        speaker: 'TBC'\n      },\n      // the entities as ranges are each word in the space-joined text, \n      // so it needs to be compute for each the offset from the beginning of the paragraph and the length\n      entityRanges: generateEntitiesRanges(paragraph.words, 'punct') // wordAttributeName\n    };\n    // console.log(JSON.stringify(draftJsContentBlockParagraph,null,2))\n    results.push(draftJsContentBlockParagraph);\n  });\n\n  return results;\n};\n\nexport default bbcKaldiToDraft;\n","/**\n * Convert autoEdit2 Json\n *\n * into\n *\n ```\n const blocks = [\n        {\n            text: 'Hello',\n            type: 'paragraph',\n            data: {\n            speaker: 'Foo',\n            },\n            entityRanges: [],\n        },\n        {\n            text: 'World',\n            type: 'paragraph',\n            data: {\n            speaker: 'Bar',\n            },\n            entityRanges: [],\n        },\n        ];\n```\n *\n * See samples folder and test file \n * for reference data structures\n */\n\nimport generateEntitiesRanges from '../generate-entities-ranges/index.js';\n\n/**\n * groups words list from kaldi transcript based on punctuation.\n * @todo To be more accurate, should introduce an honorifics library to do the splitting of the words.\n * @param {array} words - array of words opbjects from kaldi transcript\n */\n\nconst groupWordsInParagraphs = autoEditText => {\n  const results = [];\n  let paragraph = { words: [], text: [] };\n\n  autoEditText.forEach(autoEditparagraph => {\n    autoEditparagraph.paragraph.forEach(autoEditLine => {\n      autoEditLine.line.forEach(word => {\n        // adjusting time reference attributes from \n        //`startTime` `endTime` to `start` `end`\n        // for word object \n        const tmpWord= { \n          text: word.text, \n          start: word.startTime, \n          end: word.endTime };\n        //  if word contains punctuation\n         if (/[.?!]/.test(word.text)) {\n          paragraph.words.push(tmpWord);\n          paragraph.text.push(word.text);\n          results.push(paragraph);\n          // reset paragraph\n          paragraph = { words: [], text: [] };\n        } else {\n          paragraph.words.push(tmpWord);\n          paragraph.text.push(word.text);\n        }\n      })\n    })\n  });\n\n  return results;\n};\n\nconst autoEdit2ToDraft = autoEdit2Json => {\n  const results = [];\n  const  tmpWords = autoEdit2Json.text;\n  const wordsByParagraphs = groupWordsInParagraphs(tmpWords);\n  // console.log(wordsByParagraphs);\n\n  wordsByParagraphs.forEach(paragraph => {\n    // console.log(paragraph.words);\n    const draftJsContentBlockParagraph = {\n      text: paragraph.text.join(' '),\n      type: 'paragraph',\n      data: {\n        speaker: 'TBC'\n      },\n      // the entities as ranges are each word in the space-joined text, \n      // so it needs to be compute for each the offset from the beginning of the paragraph and the length\n      entityRanges: generateEntitiesRanges(paragraph.words, 'text')\n    };\n    // console.log(JSON.stringify(draftJsContentBlockParagraph,null,2))\n    results.push(draftJsContentBlockParagraph);\n  });\n  // console.log(JSON.stringify(results,null,2))\n  return results;\n};\n\nexport default autoEdit2ToDraft;","import bbcKaldiToDraft from './bbc-kaldi/index.js';\nimport autoEdit2ToDraft from './autoEdit2/index.js';\n/**\n * Adapters for STT conversion\n * @param {json} transcriptData - A json transcript with some word accurate timecode\n * @param {string} sttJsonType - the type of transcript supported by the available adapters\n */\nconst sttJsonAdapter = (transcriptData, sttJsonType) => {\n    switch(sttJsonType) {\n        case 'bbckaldi':\n            return bbcKaldiToDraft(transcriptData);\n        case 'autoedit2':\n            return autoEdit2ToDraft(transcriptData);\n        default:\n            // code block\n            console.error('not recognised the stt enginge');\n    }\n}\n\nexport default sttJsonAdapter;","function returnHotKeys(self){\n  return {\n        'esc': { \n            priority: 1,\n            handler: (event) => { self.playMedia();},\n            helperText: 'Play Media'\n        },\n        'ctrl+k': { // combo from mousetrap\n            priority: 1,\n            handler: (event) => { self.promptSetCurrentTime();},\n            helperText: 'set current time'\n        },\n        'ctrl+1': { \n            priority: 1,\n            handler: (event) => { self.skipForward();console.log('Skip Forward');},\n            helperText: 'Skip Forward'\n        },\n        'ctrl+2': { \n            priority: 1,\n            handler: (event) => { self.skipBackward();console.log('Skip Backward');},\n            helperText: 'Skip Backward'\n        },\n        'ctrl+3': { \n            priority: 1,\n            handler: (event) => { self.decreasePlaybackRate();console.log('Speed Up - increase playbackRate');},\n            helperText: 'Speed Up '\n        },\n        'ctrl+4': { \n            priority: 1,\n            handler: (event) => { self.increasePlaybackRate(); console.log('Speed Down - Decrease playbackRate');},\n            helperText: 'Speed Down'\n        },\n        'ctrl+5': { \n            priority: 1,\n            handler: (event) => { self.rollBack();},\n            helperText: 'Roll Back'\n        }\n        // ,'ctrl+/': { \n        //     priority: 1,\n        //     handler: (event) => { console.log('show hide shortcuts');},\n        //     helperText: 'Show/Hide shortcuts'\n        // }\n        // ,'ctrl+s': { \n        //     priority: 1,\n        //     handler: (event) => { console.log('save');},\n        //     helperText: 'Save'\n        // }\n    }\n}\nexport default returnHotKeys; ","/**\n* Raised in this comment https://github.com/bbc/react-transcript-editor/pull/9\n* abstracted from https://github.com/bbc/newslabs-cdn/blob/master/js/20-bbcnpf.utils.js\n* In broadcast VIDEO, timecode is NOT hh:mm:ss:ms, it's hh:mm:ss:ff where ff is frames, \n* dependent on the framerate of the media concerned.\n* `hh:mm:ss:ff` \n*/\n\n/**\n * Helper function \n * Rounds to the 14milliseconds boundaries \n * Time in video can only \"exist in\" 14milliseconds boundaries.\n * This makes it possible for the HTML5 player to be frame accurate.\n * @param {*} seconds \n * @param {*} fps \n */\nconst normalisePlayerTime = function(seconds, fps){\n    return Number((1.0/fps*Math.floor(Number((fps*seconds).toPrecision(12)))).toFixed(2))\n}\n\n/*\n* @param {*} seconds \n* @param {*} fps \n*/\nconst secondsToTimecode = function(seconds, framePerSeconds) {\n    // written for PAL non-drop timecode\n    let fps = 25;\n    if (framePerSeconds !== undefined){\n        fps = framePerSeconds;\n    }\n\n    const normalisedSeconds= normalisePlayerTime(seconds, fps);\n    \n    const wholeSeconds=Math.floor(normalisedSeconds)\n    const frames=((normalisedSeconds-wholeSeconds)*fps).toFixed(2)\n\n    // prepends zero - example pads 3 to 03\n    function _padZero(n){\n        if(n<10)return '0'+parseInt(n)\n        else return parseInt(n)\n    }\n\n    return _padZero((wholeSeconds/60/60)%60)\n        + ':'\n        + _padZero((wholeSeconds/60)%60)\n        + ':'\n        + _padZero(wholeSeconds%60)\n        + ':'\n        + _padZero(frames)\n}\n\nexport default secondsToTimecode;\n","/**\n * Helperf unction \n * @param {*} tc \n * @param {*} fps \n */\nconst timecodeToFrames = function(tc, fps){\n    // TODO make 29.97 fps drop-frame aware - works for 25 only.\n    \n    const s=tc.split(':')\n    let frames=parseInt(s[ 3 ])\n    frames += parseInt(s[ 2 ]) * fps\n    frames += parseInt(s[ 1 ]) * (fps*60)\n    frames += parseInt(s[ 0 ]) * (fps*60*60)\n    return frames\n}\n\n/**\n * Convert broadcast timecodes to seconds \n * @param {*} tc - `hh:mm:ss:ff` \n * @param {*} framePerSeconds - defaults to 25 if not provided\n */\nconst timecodeToSecondsHelper = function(tc, framePerSeconds){\n    let fps = 25;\n    if (framePerSeconds !== undefined){\n        fps = framePerSeconds;\n    }\n    const frames = timecodeToFrames(tc, fps)\n    return Number(Number(frames/fps).toFixed(2))\n}\n\nexport default timecodeToSecondsHelper;","const countColon = (timecode)=>{\n    return timecode.split(':').length;\n}\n\nconst includesFullStop = (timecode)=>{\n   return timecode.includes('.');\n}\n\nconst isOneDigit = (str) => {\n return str.length === 1;\n}\n\nconst padTimeToTimecode = (time) =>{\n    if(typeof time === 'string'){\n        switch(countColon(time)) {\n            case 4:\n                // is already in timecode format\n                // hh:mm:ss:ff\n                return time;\n            case 2:\n                // m:ss\n                if(isOneDigit(time.split(':')[ 0 ])){\n                    return `00:0${ time }:00`;\n                } \n                // mm:ss\n                return `00:${ time }:00`;\n            case 3:\n                // hh:mm:ss\n                return `${ time }:00`;\n            default:\n                // mm.ss\n                if(includesFullStop(time)){\n                    // m.ss\n                    if(isOneDigit(time.split('.')[ 0 ])){\n                        return `00:0${ time.split('.')[ 0 ] }:${ time.split('.')[ 1 ] }:00`;\n                    } \n                    // mm.ss\n                    return `00:${ time.replace('.',':') }:00`;\n                }\n                else{\n                    // if just int, then it's seconds\n                    // s\n                    if(isOneDigit(time)){\n                        return `00:00:0${ time }:00`;\n                    }\n                    // ss\n                    return `00:00:${ time }:00`;\n                }\n        } \n    // edge case if it's number return a number coz cannot refactor\n    // TODO: might need to refactor and move this elsewhere \n    }else{\n        return time;\n    }\n}\n\nexport default padTimeToTimecode;","/**\n * Wrapping around \"time stamps\" and timecode conversion modules\n * To provide more support for variety of formats.\n */\nimport secondsToTimecode  from './secondsToTimecode.js';\nimport timecodeToSecondsHelper  from './timecodeToSeconds.js';\nimport padTimeToTimecode from './padTimeToTimecode.js';\n\n/**\n * @param {*} time \n * Can take as input timecodes in the following formats \n * - hh:mm:ss:ff\n * - mm:ss\n * - m:ss\n * - ss - seconds --> if it's already in seconds then it just returns seconds \n * - hh:mm:ff\n * @todo could be refactored with some helper functions for clarity \n */\nconst timecodeToSeconds = (time)=>{\n    if(typeof time === 'string'){\n      const resultPadded = padTimeToTimecode(time);\n      const resultConverted = timecodeToSecondsHelper(resultPadded);\n      return resultConverted;\n    } else {\n      // assuming it receive timecode as seconds as string '600'\n      return  parseFloat(time);\n    }\n}\n\nexport { secondsToTimecode, timecodeToSeconds }\n","import React from 'react';\nimport styles from './index.module.css';\nimport returnHotKeys from './defaultHotKeys.js';\n// https://www.npmjs.com/package/react-keyboard-shortcuts\nimport { hotkeys } from 'react-keyboard-shortcuts';\nimport { secondsToTimecode, timecodeToSeconds  } from '../../Util/timecode-converter/index.js';\n\n// inspired by https://github.com/bbc/nm2/blob/master/src/components/chapter/video/Video.jsx\n\nclass MediaPlayer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.videoRef = React.createRef();\n    this.playbackRateInputRange = React.createRef();\n\n    this.state = {\n      playBackRate:1,\n      rollBackValueInSeconds: 15,\n      timecodeOffset: 0,\n      hotKeys: returnHotKeys(this)\n    }\n  }\n\n  hot_keys = returnHotKeys(this)\n\n  componentDidMount(){\n    this.props.hookSeek(this.setCurrentTime);\n  }\n\n  setCurrentTime = (newCurrentTime) => {\n    \n    if(newCurrentTime!=='' && newCurrentTime!==null){\n      \n    // hh:mm:ss:ff - mm:ss - m:ss - ss - seconds number or string and hh:mm:ss\n      const newCurrentTimeInSeconds = timecodeToSeconds(newCurrentTime); \n      console.log('setCurrentTime',newCurrentTimeInSeconds,newCurrentTime)\n      if (this.videoRef.current  !== null) {\n        const videoRef = this.videoRef.current;\n        // videoRef.load();\n        if ( videoRef.readyState === 4 ) {\n          // it's loaded\n          videoRef.currentTime = newCurrentTimeInSeconds;\n          videoRef.play();\n        }\n      }\n    }\n  }\n\n  promptSetCurrentTime = () => {\n    this.setCurrentTime( prompt('Jump to time - hh:mm:ss:ff hh:mm:ss mm:ss m:ss m.ss seconds'))\n  }\n\n  setTimeCodeOffset = (newTimeCodeOffSet)=>{\n    if(newTimeCodeOffSet!=='' && newTimeCodeOffSet!==null){\n      // use similar helper function from above to convert \n      let newCurrentTimeInSeconds = newTimeCodeOffSet;\n      if(newTimeCodeOffSet.includes(':')){\n        newCurrentTimeInSeconds = timecodeToSeconds(newTimeCodeOffSet);\n        this.setState({ timecodeOffset: newCurrentTimeInSeconds })\n      }\n    }\n  }\n\n  rollBack = () =>{\n    if (this.videoRef.current  !== null) {\n      // get video duration \n      const videoElem = this.videoRef.current;\n      const tmpDesiredCurrentTime = videoElem.currentTime - this.state.rollBackValueInSeconds;\n      // > 0 < duration of video  \n      this.setCurrentTime(tmpDesiredCurrentTime);\n    }\n  }\n\n  handleTimeUpdate = (e)=>{\n    // eslint-disable-next-line react/prop-types\n    this.props.hookOnTimeUpdate(e.target.currentTime)\n  }\n\n  handlePlayBackRateChange = (e)=>{\n    this.setPlayBackRate(e.target.value)\n  }\n\n  increasePlaybackRate = () =>{\n    // if(this.videoRef.current!== null){\n    //   this.playbackRateInputRange.current.stepUp(1)\n    // }\n    \n    const currentPlaybackRate = this.getCurrentPlaybackRate();\n    let newPlaybackRate = currentPlaybackRate + 0.1;\n    // rounding up eg 0.8-0.1 =  0.7000000000000001   => 0.7\n    newPlaybackRate  = Number((newPlaybackRate).toFixed(1));\n    this.setPlayBackRate(newPlaybackRate);\n  }\n\n  decreasePlaybackRate = () =>{\n    // if(this.videoRef.current!== null){\n    //   this.playbackRateInputRange.current.stepDown(1)\n    // }\n    const currentPlaybackRate = this.getCurrentPlaybackRate();\n    let newPlaybackRate = currentPlaybackRate - 0.1;\n    // rounding up eg 0.8-0.1 =  0.7000000000000001   => 0.7\n    newPlaybackRate  = Number((newPlaybackRate).toFixed(1));\n    this.setPlayBackRate(newPlaybackRate);\n    \n  }\n\n  getCurrentPlaybackRate = () => {\n    if(this.videoRef.current!== null){\n      return this.videoRef.current.playbackRate;\n    }\n  }\n\n  setPlayBackRate = (speedValue) =>{\n    // value between 0.2 and 3.5\n    if(this.videoRef.current!== null){\n      if(speedValue>=0.2 && speedValue<=3.5){\n        this.setState({\n            playBackRate: speedValue\n          },()=>{\n              this.videoRef.current.playbackRate = speedValue;\n          })\n      }\n    }\n  }\n\n  handleChangeReplayRollbackValue = (e)=>{\n    if(this.videoRef.current!== null){\n        this.setState({\n          rollBackValueInSeconds: e.target.value \n        })\n    }\n  }\n\n  handleMuteVolume = (e) => {\n    // https://www.w3schools.com/tags/av_prop_volume.asp\n    if(this.videoRef.current!== null){\n      if(this.videoRef.current.volume > 0){\n        this.videoRef.current.volume  = 0;\n      }\n      else{\n        this.videoRef.current.volume =1;\n      }\n    }\n  }\n\n  isPlaying=(e)=>{\n    if(this.videoRef.current!== null){\n      if(this.videoRef.current.paused){\n        return false;\n      }else{\n       return true;\n      }\n    }\n  }\n  \n  playMedia =()=>{\n    if(this.videoRef.current!== null){\n      if(this.videoRef.current.paused){\n        this.videoRef.current.play();\n      }else{\n        this.videoRef.current.pause();\n      }\n    }\n  }\n\n  /**\n   * @todo Consider refactoring using \n   * https://stackoverflow.com/questions/48048957/react-long-press-event\n   * To enable pressing on forward of backward key to move \n   */\n  skipForward = () =>{\n    if(this.videoRef.current!== null){\n      const currentTime = this.videoRef.current.currentTime;\n      let newCurrentTime= currentTime + 5;\n      newCurrentTime  = Number((newCurrentTime).toFixed(1));\n      this.setCurrentTime(newCurrentTime);\n    }\n  }\n\n  skipBackward = () =>{\n    if(this.videoRef.current!== null){\n      const currentTime = this.videoRef.current.currentTime;\n      let newCurrentTime= currentTime - 5;\n      newCurrentTime  = Number((newCurrentTime).toFixed(1));\n      this.setCurrentTime(newCurrentTime);\n    }\n  }\n\n  handleProgressBarClick = (e) =>{\n    if(this.videoRef.current!== null){\n      // length of the bar\n      const lengthOfBar =  e.target.offsetWidth; \n      // distance of the position of the lick from the start of the progress bar element\n      // location of click - start point of the bar \n      const clickLength = e.clientX - e.target.offsetLeft;\n      const positionPercentage = clickLength / lengthOfBar;\n      // total time\n      const totalTime = e.target.max;\n      const resultInSeconds = totalTime * positionPercentage;  \n      // rounding up \n      const roundNewCurrentTime = parseFloat((resultInSeconds).toFixed(2));\n      this.setCurrentTime(roundNewCurrentTime);\n    }\n  }\n\n  render() {\n    // conditional, if media player not defined then don't show\n    let mediaPlayerEl;\n    if (this.props.mediaUrl !== null) {\n      mediaPlayerEl = (\n          <video\n          id=\"video\"\n          playsInline\n          // autoPlay\n          // controls\n          src={ this.props.mediaUrl }\n          onTimeUpdate={ this.handleTimeUpdate }\n          // TODO: video type\n          type=\"video/mp4\"\n          data-testid=\"media-player-id\"\n          onClick={ this.playMedia }\n          ref={ this.videoRef }\n        />\n      );\n    }\n\n    const playerControlsSection = <section>\n        {/* Progress bar  */}\n        <progress \n            className={ styles.progressBar } \n            max={ this.videoRef.current!== null? parseInt(this.videoRef.current.duration) : '100' }\n            value= { this.videoRef.current!== null? parseInt(this.videoRef.current.currentTime) : '0' }\n            onClick={ (e)=>{ this.handleProgressBarClick(e) } }\n            />\n\n        <br/>\n        {/* Play / Pause Btn  */}\n        {this.props.mediaUrl !== null? <button onClick={ ()=>{ this.playMedia()} }> {this.isPlaying()? '❚❚' : '▶'} </button>:''}\n       \n        {/* Backward Btn */}\n        {this.props.mediaUrl !== null? <button onClick={ ()=>{ this.skipBackward()} }> {'◀◀'} </button>:''}\n        {/* Forward Btn */}\n        {this.props.mediaUrl !== null? <button onClick={ ()=>{ this.skipForward()} }> {'▶▶'} </button>:''}\n\n         ️<br/>\n        {/* Display timecodes */}\n        <code>{this.videoRef.current!== null ? secondsToTimecode(this.videoRef.current.currentTime + this.state.timecodeOffset): '00:00:00:00'}</code>\n            /\n        <code>{this.videoRef.current!== null ?  secondsToTimecode(this.videoRef.current.duration + this.state.timecodeOffset): '00:00:00:00'}</code>\n        <br/>\n\n        <button type=\"button\" onClick={ this.promptSetCurrentTime }>Jump To Time ⏱</button> <br/>\n        \n        <button type=\"button\" onClick={ ()=>{ this.setTimeCodeOffset( prompt('Add a timecode offset hh:mm:ss:ff'))} }>Set Timecode Offset ⏱</button>\n        <output><code>{secondsToTimecode(this.state.timecodeOffset)}</code></output>\n        <br/>\n        {/* <label>Supported timecode formats</label>\n        <br/>\n        <code>hh:mm:ss:ms</code>  <code>mm:ss</code>  <code>m:ss</code> <code>m.ss</code>  <code>seconds</code>  <code>hh:mm:ss</code>\n        <br/> */}\n            \n        {/* Volume Toggle */}\n        <p className={ styles.helpText }>Volume</p>\n        <label className={ styles.switch }>\n            <input type=\"checkbox\" \n                defaultChecked=\"true\" \n                onChange={ this.handleMuteVolume }\n                />\n            <span className={ styles.slider }></span>\n        </label>\n\n        {/* Playback Rate  */}\n        <p className={ styles.helpText }>Playback Rate \n            <b> <output >{  `x${ this.state.playBackRate }` }</output> </b>\n        </p>\n  \n        <input \n              type=\"range\"  \n              min=\"0.2\"\n              value={ this.state.playBackRate } \n              max=\"3.5\"  \n              step=\"0.1\"  \n              // list=\"tickmarks\"\n              onChange={ this.handlePlayBackRateChange }\n              ref={ this.playbackRateInputRange }\n              />\n              \n        <br/>\n        <button type=\"button\" onClick={ ()=> { this.setPlayBackRate(1)} }>Reset</button>\n            \n        {/* Rollback ⟲ ↺  */}\n        <p className={ styles.helpText }>Rollback  \n            <b> <output >{  `x${ this.state.rollBackValueInSeconds }` }</output></b> Seconds\n        </p>\n      \n        <input \n              type=\"range\"  \n              min=\"1\"\n              max=\"60\"  \n              step=\"1\"  \n              value={ this.state.rollBackValueInSeconds  } \n              onChange={ this.handleChangeReplayRollbackValue }\n              /> \n        <br/>\n        <button type=\"button\" onClick={ ()=> { this.rollBack()} }>↺</button>\n\n    </section>;\n\n    const keyboardShortcutsHelp = Object.keys(this.state.hotKeys).map((shortcutKey,index) =>{\n      return <p className={ styles.helpText }  key={ shortcutKey }><code>{shortcutKey}</code> <small><b>{this.state.hotKeys[ shortcutKey ].helperText}</b></small></p>;\n    })\n\n    return (\n        <section className={ styles.videoSection }>\n            {mediaPlayerEl}\n            {this.props.mediaUrl !== null?  playerControlsSection:''}\n           \n            <section><label>{this.props.mediaUrl !== null? 'Keyboard Shortcuts':''}</label>\n                {this.props.mediaUrl !== null? keyboardShortcutsHelp :''}\n            </section>  \n        </section>\n        );\n  }\n}\n\n// export default mouseTrap(MediaPlayer);\nexport default hotkeys(MediaPlayer);\n// export default MediaPlayer;\n","import React from 'react';\nimport styles from './index.module.css';\n\nimport TimedTextEditor from './TimedTextEditor/index.js';\nimport MediaPlayer from './MediaPlayer/index.js';\n\nclass TranscriptEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state ={\n           currentTime:0\n        }\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    handleWordClick = (startTime) => {\n        this.setCurrentTime(startTime);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    handleTimeUpdate = (currentTime) => {\n            this.setState({\n                currentTime: currentTime\n            })\n    }\n\n    render() {\n        return (\n            <section className={ styles.container }>\n                <header className={ styles.header }>\n                  \n                </header>\n                <aside className={ styles.nav }>\n                    <MediaPlayer \n                    // eslint-disable-next-line no-return-assign\n                    hookSeek={ (foo) => this.setCurrentTime = foo }\n                    hookOnTimeUpdate={ this.handleTimeUpdate }\n                    mediaUrl={ this.props.mediaUrl } \n                    />\n                </aside>\n                <main className={ styles.main }>\n                    <TimedTextEditor \n                    transcriptData={ this.props.transcriptData } \n                    onWordClick={ this.handleWordClick }\n                    currentTime={ this.state.currentTime } \n                    isEditable={ this.props.isEditable }\n                    sttJsonType={ this.props.sttJsonType }\n                    />\n                </main>\n                {/* <aside className={ styles.aside }>Settings</aside> */}\n                <footer className={ styles.footer }></footer>\n            </section>\n        );\n    }\n}\n\nexport default TranscriptEditor;\n","import React from 'react';\nconst SttTypeSelect = (props) => (<select name={ props.name } value={ props.value } onChange={ props.handleChange }>\n    <option value=\"bbckaldi\">BBC Kaldi</option>\n    <option value=\"gentle-transcript\" disabled>Gentle Transcript</option>\n    <option value=\"gentle-alignement\" disabled>Gentle Alignement</option>\n    <option value=\"autoedit2\">autoEdit 2</option>\n    <option value=\"ibm\" disabled>IBM Watson STT</option>\n    <option value=\"speechmatics\" disabled>Speechmatics</option>\n    <option value=\"assemblyai\" disabled>AssemblyAI</option>\n    <option value=\"rev\" disabled>Rev</option>\n    <option value=\"srt\" disabled>Srt</option>\n    <option value=\"vtt\" disabled>VTT</option>\n    <option value=\"vtt-youtube\" disabled>Youtube VTT</option>\n</select>)\n\nexport default SttTypeSelect;","import React from 'react';\nimport { render } from 'react-dom';\nimport { TranscriptEditor } from './lib';\n// import kaldiTranscript from './sample-data/kaldi-transcription-20181029235300.json';\nimport kaldiTedTalkTranscript from './sample-data/KateDarling_2018S-bbc-kaldi.json';\nimport styles from './index.module.css';\nimport SttTypeSelect from './select-stt-json-type.js'\n\nconst tedTalkVideoUrl =\n  'https://download.ted.com/talks/KateDarling_2018S-950k.mp4';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      transcriptData: null,\n      mediaUrl: null,\n      isTextEditable: true,\n      sttType: 'bbckaldi'\n    };\n    // this.handleChangeLoadTranscriptJson = this.handleChangeLoadTranscriptJson.bind(this);\n  }\n  loadDemo() {\n    this.setState({\n      transcriptData: kaldiTedTalkTranscript,\n      mediaUrl: tedTalkVideoUrl,\n      sttType: 'bbckaldi'\n    });\n  }\n\n  // https://stackoverflow.com/questions/8885701/play-local-hard-drive-video-file-with-html5-video-tag\n  handleChangeLoadMedia(files) {\n    console.log(files);\n    const file = files[ 0 ];\n    const type = file.type;\n    // check if is playable\n    const videoNode = document.createElement('video');\n    const canPlay = videoNode.canPlayType(type);\n    if (canPlay) {\n      var fileURL = URL.createObjectURL(file);\n      // videoNode.src = fileURL\n      this.setState({\n        // transcriptData: kaldiTedTalkTranscript,\n        mediaUrl: fileURL\n      });\n    }\n  }\n\n  handleChangeLoadMediaUrl() {\n    const fileURL = prompt(\"Paste the URL you'd like to use here\");\n\n    this.setState({\n      // transcriptData: kaldiTedTalkTranscript,\n      mediaUrl: fileURL\n    });\n  }\n\n  handleChangeLoadTranscriptJson(files) {\n    const self = this;\n    const file = files[ 0 ];\n    // let type = file.type;\n    // TODO: add checks\n    // let transcriptJsonContent = FileReader.readAsText(file)\n    var fr = new FileReader();\n    fr.onload = function(e) {\n      // e.target.result should contain the text\n      console.log(JSON.parse(e.target.result));\n      self.setState({\n        transcriptData: JSON.parse(e.target.result)\n        // mediaUrl: tedTalkVideoUrl\n      });\n    };\n    fr.readAsText(file);\n  }\n\n  handleIsTextEditable = (e)=>{\n    this.setState((prevState,props) => {\n      return { isTextEditable: (prevState.isTextEditable) === true ? false: true }\n    })\n  }\n\n  // https://stackoverflow.com/questions/21733847/react-jsx-selecting-selected-on-selected-select-option\n  handleSttTypeChange = (event) =>{\n    console.log(event.target.name ,event.target.value )\n    this.setState({ [ event.target.name ]: event.target.value });\n  }\n\n  render() {\n    return (\n        <div className={ styles.container }>\n            <span className={ styles.title }>\n            Demo page for <mark>React Transcript Editor</mark> - Component |{' '}\n                <a\n            href=\"https://github.com/bbc/react-transcript-editor\"\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n          >\n            Github Repo\n                </a>\n            </span>\n            <br />\n            <button onClick={ () => this.loadDemo() }>load demo</button>\n            <br />\n            <label>open Transcript Json</label>\n            <input\n          type=\"file\"\n          onChange={ e => this.handleChangeLoadTranscriptJson(e.target.files) }\n        />\n            <SttTypeSelect\n            name={ 'sttType' }\n            value={ this.state.sttType }\n            handleChange={ this.handleSttTypeChange }\n           />\n\n            <br />\n            <label>Load Local Media</label>\n            <input\n          type=\"file\"\n          onChange={ e => this.handleChangeLoadMedia(e.target.files) }\n        />\n            <br />\n            <button onClick={ () => this.handleChangeLoadMediaUrl() }>\n          Load Media From Url\n            </button>\n\n            <p>Text Is Editable\n                <label className={ styles.switch }>\n                    <input type=\"checkbox\" \n                  defaultChecked=\"true\" \n                  onChange={ this.handleIsTextEditable }\n                  />\n                    <span className={ styles.slider }></span>\n                </label>\n            </p>\n\n            <hr/>\n\n            <TranscriptEditor\n              transcriptData={ this.state.transcriptData }\n              mediaUrl={ this.state.mediaUrl }\n              isEditable={ this.state.isTextEditable }\n              sttJsonType={ this.state.sttType }\n            />\n        </div>\n    );\n  }\n}\n\nrender(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TranscriptEditor_container__28OEI\",\"nav\":\"TranscriptEditor_nav__173Ja\",\"header\":\"TranscriptEditor_header__3t9qT\",\"main\":\"TranscriptEditor_main__2aOzn\",\"aside\":\"TranscriptEditor_aside__1f7EK\",\"footer\":\"TranscriptEditor_footer__1EQwE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"src_container__2-l5-\",\"title\":\"src_title__1Il-4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editor\":\"TimedTextEditor_editor__2M5RK\"};"],"sourceRoot":""}